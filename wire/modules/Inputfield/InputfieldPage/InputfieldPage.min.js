function initInputfieldPage(a){a.find("p.InputfieldPageAddButton a").click(function(){var b=$(this).parent("p").next(".InputfieldPageAddItems");if(b.is(":visible")){b.slideUp("fast").find(":input").val("")}else{b.slideDown("fast").parents(".ui-widget-content").slice(0,1).effect("highlight",{},500)}return false});a.find(".findPagesSelector").each(function(){var i=$(this);var f=i.val();if(f.indexOf("=page.")==-1){return}var j=i.attr("data-label");var k=i.parents(".InputfieldPage");var g=$("select#"+k.attr("id").replace(/^wrap_/,""));if(g.length<1){return}var h=f.match(/(=page.[_a-zA-Z0-9]+)/g);for(var e=0;e<h.length;e++){var d=h[e];var c=d.replace("=page.","");var b=$("#Inputfield_"+c);if(b.length<1){return}b.change(function(){var n=f;var l=b.val();if(l==null){g.children().remove();g.change();return}l=l.toString();l=l.replace(/,/g,"|");n=n.replace(d,"="+l);n=n.replace(/,\s*/g,"&");if(n.indexOf("_LPID")){n=n.replace(/_LPID[0-9]+/g,"")}var m=config.urls.admin+"page/search/for?"+n+"&limit=999&get="+j;$.getJSON(m,{},function(q){g.children().addClass("option-tbd");for(e=0;e<q.matches.length;e++){var p=q.matches[e];var r=g.children("[value="+p.id+"]");var o=false;if(r.size()>0){o=r.is(":checked")}r.remove();var r=$("<option value='"+p.id+"'>"+p[j]+"</option>");if(o){r.attr("selected","selected")}g.append(r)}g.children(".option-tbd").remove();g.change()})})}})}$(document).ready(function(){$(".InputfieldPage").each(function(){initInputfieldPage($(this))});$(document).on("reloaded",".InputfieldPage",function(){initInputfieldPage($(this))})});