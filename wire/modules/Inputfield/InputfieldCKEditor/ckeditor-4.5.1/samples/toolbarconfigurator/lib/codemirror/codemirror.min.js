(function(a){if("object"==typeof exports&&"object"==typeof module){module.exports=a()}else{if("function"==typeof define&&define.amd){return define([],a)}this.CodeMirror=a()}})(function(){function e6(o,m){if(!(this instanceof e6)){return new e6(o,m)}this.options=m=m?fy(m):{};fy(dm,m,!1);bv(m);var t=m.value;"string"==typeof t&&(t=new fE(t,m.mode));this.doc=t;var r=new e6.inputStyles[m.inputStyle](this),r=this.display=new c2(o,t,r);r.wrapper.CodeMirror=this;a5(this);aT(this);m.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap");m.autofocus&&!bP&&r.input.focus();aH(this);this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,draggingText:!1,highlight:new bD,keySeq:null,specialChars:null};var q=this;eV&&11>eT&&setTimeout(function(){q.display.input.reset(true)},20);cP(this);av||(cD(),av=!0);D(this);this.curOp.forceUpdate=!0;ai(this,t);m.autofocus&&!bP||q.hasFocus()?setTimeout(bl(a6,this),20):cq(this);for(var p in c){if(c.hasOwnProperty(p)){c[p](this,m[p],f)}}gv(this);m.finishInit&&m.finishInit(this);for(t=0;t<aU.length;++t){aU[t](this)}gs(this);fQ&&(m.lineWrapping&&"optimizelegibility"==getComputedStyle(r.lineDiv).textRendering)&&(r.lineDiv.style.textRendering="auto")}function c2(o,m,p){this.input=p;this.scrollbarFiller=e3("div",null,"CodeMirror-scrollbar-filler");this.scrollbarFiller.setAttribute("cm-not-content","true");this.gutterFiller=e3("div",null,"CodeMirror-gutter-filler");this.gutterFiller.setAttribute("cm-not-content","true");this.lineDiv=e3("div",null,"CodeMirror-code");this.selectionDiv=e3("div",null,null,"position: relative; z-index: 1");this.cursorDiv=e3("div",null,"CodeMirror-cursors");this.measure=e3("div",null,"CodeMirror-measure");this.lineMeasure=e3("div",null,"CodeMirror-measure");this.lineSpace=e3("div",[this.measure,this.lineMeasure,this.selectionDiv,this.cursorDiv,this.lineDiv],null,"position: relative; outline: none");this.mover=e3("div",[e3("div",[this.lineSpace],"CodeMirror-lines")],null,"position: relative");this.sizer=e3("div",[this.mover],"CodeMirror-sizer");this.sizerWidth=null;this.heightForcer=e3("div",null,null,"position: absolute; height: "+f4+"px; width: 1px;");this.gutters=e3("div",null,"CodeMirror-gutters");this.lineGutter=null;this.scroller=e3("div",[this.sizer,this.heightForcer,this.gutters],"CodeMirror-scroll");this.scroller.setAttribute("tabIndex","-1");this.wrapper=e3("div",[this.scrollbarFiller,this.gutterFiller,this.scroller],"CodeMirror");eV&&8>eT&&(this.gutters.style.zIndex=-1,this.scroller.style.paddingRight=0);if(!fQ&&(!a8||!bP)){this.scroller.draggable=!0}o&&(o.appendChild?o.appendChild(this.wrapper):o(this.wrapper));this.reportedViewFrom=this.reportedViewTo=this.viewFrom=this.viewTo=m.first;this.view=[];this.externalMeasured=this.renderedView=null;this.lastWrapHeight=this.lastWrapWidth=this.viewOffset=0;this.updateLineNumbers=null;this.nativeBarWidth=this.barHeight=this.barWidth=0;this.scrollbarsClipped=!1;this.lineNumWidth=this.lineNumInnerWidth=this.lineNumChars=null;this.alignWidgets=!1;this.maxLine=this.cachedCharWidth=this.cachedTextHeight=this.cachedPaddingH=null;this.maxLineLength=0;this.maxLineChanged=!1;this.wheelDX=this.wheelDY=this.wheelStartX=this.wheelStartY=null;this.shift=!1;this.activeTouch=this.selForContextMenu=null;p.init(this)}function aI(m){m.doc.mode=e6.getMode(m.options,m.doc.modeOption);gk(m)}function gk(m){m.doc.iter(function(o){o.stateAfter&&(o.stateAfter=null);o.styles&&(o.styles=null)});m.doc.frontier=m.doc.first;fR(m,100);m.state.modeGen++;m.curOp&&fD(m)}function bo(o){var m=aW(o.display),q=o.options.lineWrapping,p=q&&Math.max(5,o.display.scroller.clientWidth/fj(o.display)-3);return function(u){if(aK(o.doc,u)){return 0}var t=0;if(u.widgets){for(var r=0;r<u.widgets.length;r++){u.widgets[r].height&&(t+=u.widgets[r].height)}}return q?t+(Math.ceil(u.text.length/p)||1)*m:t+m}}function aw(o){var m=o.doc,p=bo(o);m.iter(function(r){var q=p(r);q!=r.height&&fq(r,q)})}function aT(m){m.display.wrapper.className=m.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+m.options.theme.replace(/(^|\s)\s*/g," cm-s-");eN(m)}function eA(m){a5(m);fD(m);setTimeout(function(){aj(m)},20)}function a5(o){var m=o.display.gutters,t=o.options.gutters;ay(m);for(var r=0;r<t.length;++r){var q=t[r],p=m.appendChild(e3("div",null,"CodeMirror-gutter "+q));"CodeMirror-linenumbers"==q&&(o.display.lineGutter=p,p.style.width=(o.display.lineNumWidth||1)+"px")}m.style.display=r?"":"none";g(o)}function g(m){m.display.sizer.style.marginLeft=m.display.gutters.offsetWidth+"px"}function b(o){if(0==o.height){return 0}for(var m=o.text.length,q,p=o;q=al(p,!0);){q=q.find(0,!0),p=q.from.line,m+=q.from.ch-q.to.ch}for(p=o;q=al(p,!1);){q=q.find(0,!0),m-=p.text.length-q.from.ch,p=q.to.line,m+=p.text.length-q.to.ch}return m}function gw(o){var m=o.display,o=o.doc;m.maxLine=e2(o,o.first);m.maxLineLength=b(m.maxLine);m.maxLineChanged=!0;o.iter(function(p){var q=b(p);q>m.maxLineLength&&(m.maxLineLength=q,m.maxLine=p)})}function bv(o){var m=fL(o.gutters,"CodeMirror-linenumbers");-1==m&&o.lineNumbers?o.gutters=o.gutters.concat(["CodeMirror-linenumbers"]):-1<m&&!o.lineNumbers&&(o.gutters=o.gutters.slice(0),o.gutters.splice(m,1))}function en(o){var m=o.display,q=m.gutters.offsetWidth,p=Math.round(o.doc.height+(o.display.mover.offsetHeight-o.display.lineSpace.offsetHeight));return{clientHeight:m.scroller.clientHeight,viewHeight:m.wrapper.clientHeight,scrollWidth:m.scroller.scrollWidth,clientWidth:m.scroller.clientWidth,viewWidth:m.wrapper.clientWidth,barLeft:o.options.fixedGutter?q:0,docHeight:p,scrollHeight:p+gl(o)+m.barHeight,nativeBarWidth:m.nativeBarWidth,gutterWidth:q}}function f5(o,m,r){this.cm=r;var q=this.vert=e3("div",[e3("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),p=this.horiz=e3("div",[e3("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");o(q);o(p);e4(q,"scroll",function(){q.clientHeight&&m(q.scrollTop,"vertical")});e4(p,"scroll",function(){p.clientWidth&&m(p.scrollLeft,"horizontal")});this.checkedOverlay=!1;eV&&8>eT&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")}function bp(){}function aH(m){m.display.scrollbars&&(m.display.scrollbars.clear(),m.display.scrollbars.addClass&&d3(m.display.wrapper,m.display.scrollbars.addClass));m.display.scrollbars=new e6.scrollbarModel[m.options.scrollbarStyle](function(o){m.display.wrapper.insertBefore(o,m.display.scrollbarFiller);e4(o,"mousedown",function(){m.state.focused&&setTimeout(function(){m.display.input.focus()},0)});o.setAttribute("cm-not-content","true")},function(o,p){p=="horizontal"?f1(m,o):dQ(m,o)},m);m.display.scrollbars.addClass&&dD(m.display.wrapper,m.display.scrollbars.addClass)}function fr(o,m){m||(m=en(o));var r=o.display.barWidth,q=o.display.barHeight;aZ(o,m);for(var p=0;4>p&&r!=o.display.barWidth||q!=o.display.barHeight;p++){r!=o.display.barWidth&&o.options.lineWrapping&&gr(o),aZ(o,en(o)),r=o.display.barWidth,q=o.display.barHeight}}function aZ(o,m){var q=o.display,p=q.scrollbars.update(m);q.sizer.style.paddingRight=(q.barWidth=p.right)+"px";q.sizer.style.paddingBottom=(q.barHeight=p.bottom)+"px";p.right&&p.bottom?(q.scrollbarFiller.style.display="block",q.scrollbarFiller.style.height=p.bottom+"px",q.scrollbarFiller.style.width=p.right+"px"):q.scrollbarFiller.style.display="";p.bottom&&o.options.coverGutterNextToScrollbar&&o.options.fixedGutter?(q.gutterFiller.style.display="block",q.gutterFiller.style.height=p.bottom+"px",q.gutterFiller.style.width=m.gutterWidth+"px"):q.gutterFiller.style.display=""}function a0(o,m,t){var r=t&&null!=t.top?Math.max(0,t.top):o.scroller.scrollTop,r=Math.floor(r-o.lineSpace.offsetTop),q=t&&null!=t.bottom?t.bottom:r+o.wrapper.clientHeight,r=i(m,r),q=i(m,q);if(t&&t.ensure){var p=t.ensure.from.line,t=t.ensure.to.line;p<r?(r=p,q=i(m,d4(e2(m,p))+o.wrapper.clientHeight)):Math.min(t,m.lastLine())>=q&&(r=i(m,d4(e2(m,t))-o.wrapper.clientHeight),q=t)}return{from:r,to:Math.max(q,r+1)}}function aj(w){var v=w.display,u=v.view;if(v.alignWidgets||v.gutters.firstChild&&w.options.fixedGutter){for(var t=aO(v)-v.scroller.scrollLeft+w.doc.scrollLeft,r=v.gutters.offsetWidth,q=t+"px",p=0;p<u.length;p++){if(!u[p].hidden){w.options.fixedGutter&&u[p].gutter&&(u[p].gutter.style.left=q);var o=u[p].alignable;if(o){for(var m=0;m<o.length;m++){o[m].style.left=q}}}}w.options.fixedGutter&&(v.gutters.style.left=t+r+"px")}}function gv(o){if(!o.options.lineNumbers){return !1}var m=o.doc,m=""+o.options.lineNumberFormatter(m.first+m.size-1+o.options.firstLineNumber),r=o.display;if(m.length!=r.lineNumChars){var q=r.measure.appendChild(e3("div",[e3("div",m)],"CodeMirror-linenumber CodeMirror-gutter-elt")),p=q.firstChild.offsetWidth,q=q.offsetWidth-p;r.lineGutter.style.width="";r.lineNumInnerWidth=Math.max(p,r.lineGutter.offsetWidth-q)+1;r.lineNumWidth=r.lineNumInnerWidth+q;r.lineNumChars=r.lineNumInnerWidth?m.length:-1;r.lineGutter.style.width=r.lineNumWidth+"px";g(o);return !0}return !1}function aO(m){return m.scroller.getBoundingClientRect().left-m.sizer.getBoundingClientRect().left}function f0(o,m,q){var p=o.display;this.viewport=m;this.visible=a0(p,o.doc,m);this.editorIsHidden=!p.wrapper.offsetWidth;this.wrapperHeight=p.wrapper.clientHeight;this.wrapperWidth=p.wrapper.clientWidth;this.oldDisplayWidth=cU(o);this.force=q;this.dims=aC(o);this.events=[]}function ap(o,m){var u=o.display,t=o.doc;if(m.editorIsHidden){return cI(o),!1}if(!m.force&&m.visible.from>=u.viewFrom&&m.visible.to<=u.viewTo&&(null==u.updateLineNumbers||u.updateLineNumbers>=u.viewTo)&&u.renderedView==u.view&&0==aN(o)){return !1}gv(o)&&(cI(o),m.dims=aC(o));var r=t.first+t.size,q=Math.max(m.visible.from-o.options.viewportMargin,t.first),p=Math.min(r,m.visible.to+o.options.viewportMargin);u.viewFrom<q&&20>q-u.viewFrom&&(q=Math.max(t.first,u.viewFrom));u.viewTo>p&&20>u.viewTo-p&&(p=Math.min(r,u.viewTo));cw&&(q=n(o.doc,q),p=aB(o.doc,p));t=q!=u.viewFrom||p!=u.viewTo||u.lastWrapHeight!=m.wrapperHeight||u.lastWrapWidth!=m.wrapperWidth;r=o.display;0==r.view.length||q>=r.viewTo||p<=r.viewFrom?(r.view=fp(o,q,p),r.viewFrom=q):(r.viewFrom>q?r.view=fp(o,q,r.viewFrom).concat(r.view):r.viewFrom<q&&(r.view=r.view.slice(gy(o,q))),r.viewFrom=q,r.viewTo<p)?r.view=r.view.concat(fp(o,r.viewTo,p)):r.viewTo>p&&(r.view=r.view.slice(0,gy(o,p)));r.viewTo=p;u.viewOffset=d4(e2(o.doc,u.viewFrom));o.display.mover.style.top=u.viewOffset+"px";p=aN(o);if(!t&&0==p&&!m.force&&u.renderedView==u.view&&(null==u.updateLineNumbers||u.updateLineNumbers>=u.viewTo)){return !1}q=gm();4<p&&(u.lineDiv.style.display="none");cr(o,u.updateLineNumbers,m.dims);4<p&&(u.lineDiv.style.display="");u.renderedView=u.view;q&&(gm()!=q&&q.offsetHeight)&&q.focus();ay(u.cursorDiv);ay(u.selectionDiv);u.gutters.style.height=0;t&&(u.lastWrapHeight=m.wrapperHeight,u.lastWrapWidth=m.wrapperWidth,fR(o,400));u.updateLineNumbers=null;return !0}function ao(o,m){for(var q=m.viewport,p=!0;;p=!1){if(!p||!(o.options.lineWrapping&&m.oldDisplayWidth!=cU(o))){if(q&&null!=q.top&&(q={top:Math.min(o.doc.height+(o.display.mover.offsetHeight-o.display.lineSpace.offsetHeight)-a(o),q.top)}),m.visible=a0(o.display,o.doc,q),m.visible.from>=o.display.viewFrom&&m.visible.to<=o.display.viewTo){break}}if(!ap(o,m)){break}gr(o);p=en(o);dr(o);gq(o,p);fr(o,p)}m.signal(o,"update",o);if(o.display.viewFrom!=o.display.reportedViewFrom||o.display.viewTo!=o.display.reportedViewTo){m.signal(o,"viewportChange",o,o.display.viewFrom,o.display.viewTo),o.display.reportedViewFrom=o.display.viewFrom,o.display.reportedViewTo=o.display.viewTo}}function fZ(o,m){var q=new f0(o,m);if(ap(o,q)){gr(o);ao(o,q);var p=en(o);dr(o);gq(o,p);fr(o,p);q.finish()}}function gq(o,m){o.display.sizer.style.minHeight=m.docHeight+"px";var p=m.docHeight+o.display.barHeight;o.display.heightForcer.style.top=p+"px";o.display.gutters.style.height=Math.max(p+gl(o),m.clientHeight)+"px"}function gr(o){for(var o=o.display,m=o.lineDiv.offsetTop,t=0;t<o.view.length;t++){var r=o.view[t],q;if(!r.hidden){if(eV&&8>eT){var p=r.node.offsetTop+r.node.offsetHeight;q=p-m;m=p}else{q=r.node.getBoundingClientRect(),q=q.bottom-q.top}p=r.line.height-q;2>q&&(q=aW(o));if(0.001<p||-0.001>p){if(fq(r.line,q),l(r.line),r.rest){for(q=0;q<r.rest.length;q++){l(r.rest[q])}}}}}}function l(o){if(o.widgets){for(var m=0;m<o.widgets.length;++m){o.widgets[m].height=o.widgets[m].node.offsetHeight}}}function aC(o){for(var m=o.display,u={},t={},r=m.gutters.clientLeft,q=m.gutters.firstChild,p=0;q;q=q.nextSibling,++p){u[o.options.gutters[p]]=q.offsetLeft+q.clientLeft+r,t[o.options.gutters[p]]=q.clientWidth}return{fixedPos:aO(m),gutterTotalWidth:m.gutters.offsetWidth,gutterLeft:u,gutterWidth:t,wrapperWidth:m.wrapper.clientWidth}}function cr(z,y,x){function w(A){var B=A.nextSibling;fQ&&fx&&z.display.currentWheelTarget==A?A.style.display="none":A.parentNode.removeChild(A);return B}for(var v=z.display,u=z.options.lineNumbers,t=v.lineDiv,r=t.firstChild,q=v.view,v=v.viewFrom,p=0;p<q.length;p++){var o=q[p];if(!o.hidden){if(!o.node||o.node.parentNode!=t){var m=b2(z,o,v,x);t.insertBefore(m,r)}else{for(;r!=o.node;){r=w(r)}r=u&&null!=y&&y<=v&&o.lineNumber;o.changes&&(-1<fL(o.changes,"gutter")&&(r=!1),gB(z,o,v,x));r&&(ay(o.lineNumber),o.lineNumber.appendChild(document.createTextNode(""+z.options.lineNumberFormatter(v+z.options.firstLineNumber))));r=o.node.nextSibling}}v+=o.size}for(;r;){r=w(r)}}function gB(x,w,v,u){for(var t=0;t<w.changes.length;t++){var r=w.changes[t];if("text"==r){var r=w,q=r.text.className,p=gp(x,r);r.text==r.node&&(r.node=p.pre);r.text.parentNode.replaceChild(p.pre,r.text);r.text=p.pre;p.bgClass!=r.bgClass||p.textClass!=r.textClass?(r.bgClass=p.bgClass,r.textClass=p.textClass,fo(r)):q&&(r.text.className=q)}else{if("gutter"==r){fY(x,w,v,u)}else{if("class"==r){fo(w)}else{if("widget"==r){r=x;q=w;p=u;q.alignable&&(q.alignable=null);for(var o=q.node.firstChild,m=void 0;o;o=m){m=o.nextSibling,"CodeMirror-linewidget"==o.className&&q.node.removeChild(o)}fn(r,q,p)}}}}}w.changes=null}function eU(m){m.node==m.text&&(m.node=e3("div",null,null,"position: relative"),m.text.parentNode&&m.text.parentNode.replaceChild(m.node,m.text),m.node.appendChild(m.text),eV&&8>eT&&(m.node.style.zIndex=2));return m.node}function gp(o,m){var p=o.display.externalMeasured;return p&&p.line==m.line?(o.display.externalMeasured=null,m.measure=p.measure,p.built):eR(o,m)}function fo(o){var m=o.bgClass?o.bgClass+" "+(o.line.bgClass||""):o.line.bgClass;m&&(m+=" CodeMirror-linebackground");if(o.background){m?o.background.className=m:(o.background.parentNode.removeChild(o.background),o.background=null)}else{if(m){var p=eU(o);o.background=p.insertBefore(e3("div",null,m),p.firstChild)}}o.line.wrapClass?eU(o).className=o.line.wrapClass:o.node!=o.text&&(o.node.className="");o.text.className=(o.textClass?o.textClass+" "+(o.line.textClass||""):o.line.textClass)||""}function fY(o,m,u,t){m.gutter&&(m.node.removeChild(m.gutter),m.gutter=null);var r=m.line.gutterMarkers;if(o.options.lineNumbers||r){var q=eU(m),p=m.gutter=e3("div",null,"CodeMirror-gutter-wrapper","left: "+(o.options.fixedGutter?t.fixedPos:-t.gutterTotalWidth)+"px; width: "+t.gutterTotalWidth+"px");o.display.input.setUneditable(p);q.insertBefore(p,m.text);m.line.gutterClass&&(p.className+=" "+m.line.gutterClass);if(o.options.lineNumbers&&(!r||!r["CodeMirror-linenumbers"])){m.lineNumber=p.appendChild(e3("div",""+o.options.lineNumberFormatter(u+o.options.firstLineNumber),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+t.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+o.display.lineNumInnerWidth+"px"))}if(r){for(m=0;m<o.options.gutters.length;++m){u=o.options.gutters[m],(q=r.hasOwnProperty(u)&&r[u])&&p.appendChild(e3("div",[q],"CodeMirror-gutter-elt","left: "+t.gutterLeft[u]+"px; width: "+t.gutterWidth[u]+"px"))}}}}function b2(o,m,r,q){var p=gp(o,m);m.text=m.node=p.pre;p.bgClass&&(m.bgClass=p.bgClass);p.textClass&&(m.textClass=p.textClass);fo(m);fY(o,m,r,q);fn(o,m,q);return m.node}function fn(o,m,q){eE(o,m.line,m,q,!0);if(m.rest){for(var p=0;p<m.rest.length;p++){eE(o,m.rest[p],m,q,!1)}}}function eE(A,z,y,x,w){if(z.widgets){for(var v=eU(y),u=0,z=z.widgets;u<z.length;++u){var t=z[u],r=e3("div",[t.node],"CodeMirror-linewidget");t.handleMouseEvents||r.setAttribute("cm-ignore-events","true");var q=t,p=r,m=x;if(q.noHScroll){(y.alignable||(y.alignable=[])).push(p);var o=m.wrapperWidth;p.style.left=m.fixedPos+"px";q.coverGutter||(o-=m.gutterTotalWidth,p.style.paddingLeft=m.gutterTotalWidth+"px");p.style.width=o+"px"}q.coverGutter&&(p.style.zIndex=5,p.style.position="relative",q.noHScroll||(p.style.marginLeft=-m.gutterTotalWidth+"px"));A.display.input.setUneditable(r);w&&t.above?v.insertBefore(r,y.gutter||y.text):v.appendChild(r);fJ(t,"redraw")}}}function eG(o,m){return 0>eZ(o,m)?m:o}function et(o,m){return 0>eZ(o,m)?o:m}function er(m){m.state.focused||(m.display.input.focus(),a6(m))}function d9(m){return m.options.readOnly||m.doc.cantEdit}function eS(A,z,y,x,w){var v=A.doc;A.display.shift=!1;x||(x=v.sel);var u=b7(z),t=null;A.state.pasteIncoming&&1<x.ranges.length&&(fw&&fw.join("\n")==z?t=0==x.ranges.length%fw.length&&c6(fw,b7):u.length==x.ranges.length&&(t=c6(u,function(C){return[C]})));for(var r=x.ranges.length-1;0<=r;r--){var q=x.ranges[r],p=q.from(),m=q.to();q.empty()&&(y&&0<y?p=e5(p.line,p.ch-y):A.state.overwrite&&!A.state.pasteIncoming&&(m=e5(m.line,Math.min(e2(v,m.line).text.length,m.ch+eX(u).length))));var o=A.curOp.updateInput,p={from:p,to:m,text:t?t[r%t.length]:u,origin:w||(A.state.pasteIncoming?"paste":A.state.cutIncoming?"cut":"+input")};eW(A.doc,p);fJ(A,"inputRead",A,p);if(z&&!A.state.pasteIncoming&&A.options.electricChars&&A.options.smartIndent&&100>q.head.ch&&(!r||x.ranges[r-1].head.line!=q.head.line)){q=A.getModeAt(q.head);p=bV(p);m=!1;if(q.electricChars){for(var B=0;B<q.electricChars.length;B++){if(-1<z.indexOf(q.electricChars.charAt(B))){m=cT(A,p.line,"smart");break}}}else{q.electricInput&&q.electricInput.test(e2(v,p.line).text.slice(0,p.ch))&&(m=cT(A,p.line,"smart"))}m&&fJ(A,"electricInput",A,p.line)}}eH(A);A.curOp.updateInput=o;A.curOp.typing=!0;A.state.pasteIncoming=A.state.cutIncoming=!1}function d7(o){for(var m=[],r=[],q=0;q<o.doc.sel.ranges.length;q++){var p=o.doc.sel.ranges[q].head.line,p={anchor:e5(p,0),head:e5(p+1,0)};r.push(p);m.push(o.getRange(p.anchor,p.head))}return{text:m,ranges:r}}function dU(m){m.setAttribute("autocorrect","off");m.setAttribute("autocapitalize","off");m.setAttribute("spellcheck","false")}function eF(m){this.cm=m;this.prevInput="";this.pollingFast=!1;this.polling=new bD;this.hasSelection=this.inaccurateSelection=!1;this.composing=null}function dH(){var o=e3("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none"),m=e3("div",[o],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");fQ?o.style.width="1000px":o.setAttribute("wrap","off");eu&&(o.style.border="1px solid black");dU(o);return m}function es(m){this.cm=m;this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null;this.polling=new bD;this.gracePeriod=!1}function dv(o,m){var q=d8(o,m.line);if(!q||q.hidden){return null}var p=e2(o.doc,m.line),q=dh(q,p,m.line);(p=fv(p))&&dW(p,m.ch);p=cX(q.map,m.ch,"left");p.offset="right"==p.collapse?p.end:p.start;return p}function eh(o,m){m&&(o.bad=!0);return o}function dJ(o,m,t){var r;if(m==o.display.lineDiv){r=o.display.lineDiv.childNodes[t];if(!r){return eh(o.clipPos(e5(o.display.viewTo-1)),!0)}m=null;t=0}else{for(r=m;;r=r.parentNode){if(!r||r==o.display.lineDiv){return null}if(r.parentNode&&r.parentNode==o.display.lineDiv){break}}}for(var q=0;q<o.display.view.length;q++){var p=o.display.view[q];if(p.node==r){return bQ(p,m,t)}}}function bQ(x,w,v){function u(y,F,E){for(var C=-1;C<(m?m.length:0);C++){for(var B=0>C?o.map:m[C],A=0;A<B.length;A+=3){var z=B[A+2];if(z==y||z==F){F=fS(0>C?x.line:x.rest[C]);C=B[A]+E;if(0>E||z!=y){C=B[A+(E?1:0)]}return e5(F,C)}}}}var t=x.text.firstChild,r=!1;if(!w||!dV(t,w)){return eh(e5(fS(x.line),0),!0)}if(w==t&&(r=!0,w=t.childNodes[v],v=0,!w)){return v=x.rest?eX(x.rest):x.line,eh(e5(fS(v),v.text.length),r)}var q=3==w.nodeType?w:null,p=w;!q&&(1==w.childNodes.length&&3==w.firstChild.nodeType)&&(q=w.firstChild,v&&(v=q.nodeValue.length));for(;p.parentNode!=t;){p=p.parentNode}var o=x.measure,m=o.maps;if(w=u(q,p,v)){return eh(w,r)}t=p.nextSibling;for(q=q?q.nodeValue.length-v:0;t;t=t.nextSibling){if(w=u(t,t.firstChild,0)){return eh(e5(w.line,w.ch-q),r)}q+=t.textContent.length}p=p.previousSibling;for(q=v;p;p=p.previousSibling){if(w=u(p,p.firstChild,-1)){return eh(e5(w.line,w.ch+q),r)}q+=t.textContent.length}}function bE(w,v,u,t,r){function q(x){return function(y){return y.id==x}}function p(x){if(1==x.nodeType){var z=x.getAttribute("cm-text");if(null!=z){""==z&&(z=x.textContent.replace(/\u200b/g,"")),o+=z}else{var z=x.getAttribute("cm-marker"),y;if(z){if(x=w.findMarks(e5(t,0),e5(r+1,0),q(+z)),x.length&&(y=x[0].find())){o+=f7(w.doc,y.from,y.to).join("\n")}}else{if("false"!=x.getAttribute("contenteditable")){for(y=0;y<x.childNodes.length;y++){p(x.childNodes[y])}/^(pre|div|p)$/i.test(x.nodeName)&&(m=!0)}}}}else{if(3==x.nodeType&&(x=x.nodeValue)){m&&(o+="\n",m=!1),o+=x}}}for(var o="",m=!1;;){p(v);if(v==u){break}v=v.nextSibling}return o}function dR(o,m){this.ranges=o;this.primIndex=m}function eY(o,m){this.anchor=o;this.head=m}function fu(o,m){var u=o[m];o.sort(function(w,v){return eZ(w.from(),v.from())});m=fL(o,u);for(u=1;u<o.length;u++){var t=o[u],r=o[u-1];if(0<=eZ(r.to(),t.from())){var q=et(r.from(),t.from()),p=eG(r.to(),t.to()),t=r.empty()?t.from()==t.head:r.from()==r.head;u<=m&&--m;o.splice(--u,2,new eY(t?p:q,t?q:p))}}return new dR(o,m)}function fT(o,m){return new dR([new eY(o,m||o)],0)}function e1(o,m){if(m.line<o.first){return e5(o.first,0)}var q=o.first+o.size-1;if(m.line>q){return e5(q,e2(o,q).text.length)}var q=e2(o,m.line).text.length,p=m.ch,q=null==p||p>q?e5(m.line,q):0>p?e5(m.line,0):m;return q}function cH(o,m){return m>=o.first&&m<o.first+o.size}function cv(o,m,q,p){return o.cm&&o.cm.display.shift||o.extend?(o=m.anchor,p&&(m=0>eZ(q,o),m!=0>eZ(p,o)?(o=q,q=p):m!=0>eZ(q,p)&&(q=p)),new eY(o,q)):new eY(p||q,q)}function dx(o,m,q,p){fV(o,new dR([cv(o,o.sel.primary(),m,q)],0),p)}function cL(o,m,r){for(var q=[],p=0;p<o.sel.ranges.length;p++){q[p]=cv(o,o.sel.ranges[p],m[p],null)}m=fu(q,o.sel.primIndex);fV(o,m,r)}function dI(o,m,r,q){var p=o.sel.ranges.slice(0);p[m]=r;fV(o,fu(p,o.sel.primIndex),q)}function bs(o,m){var p={ranges:m.ranges,update:function(q){this.ranges=[];for(var r=0;r<q.length;r++){this.ranges[r]=new eY(e1(o,q[r].anchor),e1(o,q[r].head))}}};fO(o,"beforeSelectionChange",o,p);o.cm&&fO(o.cm,"beforeSelectionChange",o.cm,p);return p.ranges!=m.ranges?fu(p.ranges,p.ranges.length-1):m}function cz(o,m,r){var q=o.history.done,p=eX(q);p&&p.ranges?(q[q.length-1]=m,dj(o,m,r)):fV(o,m,r)}function fV(o,m,v){dj(o,m,v);var m=o.sel,u=o.cm?o.cm.curOp.id:NaN,t=o.history,r=v&&v.origin,q;if(!(q=u==t.lastSelOp)){if(q=r){if(q=t.lastSelOrigin==r){if(!(q=t.lastModTime==t.lastSelTime&&t.lastOrigin==r)){q=eX(t.done);var p=r.charAt(0);q="*"==p||"+"==p&&q.ranges.length==m.ranges.length&&q.somethingSelected()==m.somethingSelected()&&new Date-o.history.lastSelTime<=(o.cm?o.cm.options.historyEventDelay:500)}}}}q?t.done[t.done.length-1]=m:cZ(m,t.done);t.lastSelTime=+new Date;t.lastSelOrigin=r;t.lastSelOp=u;v&&!1!==v.clearRedo&&ch(t.undone)}function dj(o,m,q){if(fB(o,"beforeSelectionChange")||o.cm&&fB(o.cm,"beforeSelectionChange")){m=bs(o,m)}var p=q&&q.bias||(0>eZ(m.primary().head,o.sel.primary().head)?-1:1);bY(o,bM(o,m,p,!0));!(q&&!1===q.scroll)&&o.cm&&eH(o.cm)}function bY(o,m){m.equals(o.sel)||(o.sel=m,o.cm&&(o.cm.curOp.updateInput=o.cm.curOp.selectionChanged=!0,bA(o.cm)),fJ(o,"cursorActivity",o))}function bi(m){bY(m,bM(m,m.sel,null,!1),fk)}function bM(w,v,u,t){for(var r,q=0;q<v.ranges.length;q++){var p=v.ranges[q],o=cN(w,p.anchor,u,t),m=cN(w,p.head,u,t);if(r||o!=p.anchor||m!=p.head){r||(r=v.ranges.slice(0,q)),r[q]=new eY(o,m)}}return r?fu(r,v.primIndex):v}function cN(y,x,w,v){var u=!1,t=x,r=w||1;y.cantEdit=!1;y:for(;;){var q=e2(y,t.line);if(q.markedSpans){for(var p=0;p<q.markedSpans.length;++p){var o=q.markedSpans[p],m=o.marker;if((null==o.from||(m.inclusiveLeft?o.from<=t.ch:o.from<t.ch))&&(null==o.to||(m.inclusiveRight?o.to>=t.ch:o.to>t.ch))){if(v&&(fO(m,"beforeCursorEnter"),m.explicitlyCleared)){if(q.markedSpans){--p;continue}else{break}}if(m.atomic){p=m.find(0>r?-1:1);if(0==eZ(p,t)&&(p.ch+=r,0>p.ch?p=p.line>y.first?e1(y,e5(p.line-1)):null:p.ch>q.text.length&&(p=p.line<y.first+y.size-1?e5(p.line+1,0):null),!p)){if(u){if(!v){return cN(y,x,w,!0)}y.cantEdit=!0;return e5(y.first,0)}u=!0;p=x;r=-r}t=p;continue y}}}}return t}}function dr(m){m.display.input.showSelection(m.display.input.prepareSelection())}function cn(A,z){for(var y=A.doc,x={},w=x.cursors=document.createDocumentFragment(),v=x.selection=document.createDocumentFragment(),u=0;u<y.sel.ranges.length;u++){if(!(!1===z&&u==y.sel.primIndex)){var t=y.sel.ranges[u],r=t.empty();if(r||A.options.showCursorWhenSelecting){var q=A,p=w,m=dE(q,t.head,"div",null,null,!q.options.singleCursorHeightPerLine),o=p.appendChild(e3("div"," ","CodeMirror-cursor"));o.style.left=m.left+"px";o.style.top=m.top+"px";o.style.height=Math.max(0,m.bottom-m.top)*q.options.cursorHeight+"px";m.other&&(q=p.appendChild(e3("div"," ","CodeMirror-cursor CodeMirror-secondarycursor")),q.style.display="",q.style.left=m.other.left+"px",q.style.top=m.other.top+"px",q.style.height=0.85*(m.other.bottom-m.other.top)+"px")}r||a3(A,t,v)}}return x}function a3(z,y,x){function w(B,A,E,C){0>A&&(A=0);A=Math.round(A);C=Math.round(C);r.appendChild(e3("div",null,"CodeMirror-selected","position: absolute; left: "+B+"px; top: "+A+"px; width: "+(null==E?o-B:E)+"px; height: "+(C-A)+"px"))}function v(A,H,F){var E=e2(t,A),C=E.text.length,B,G;aR(fv(E),H||0,null==F?C:F,function(M,J,N){var L=cB(z,e5(A,M),"div",E,"left"),O,K;M==J?(O=L,N=K=L.left):(O=cB(z,e5(A,J-1),"div",E,"right"),"rtl"==N&&(N=L,L=O,O=N),N=L.left,K=O.right);null==H&&0==M&&(N=p);3<O.top-L.top&&(w(N,L.top,null,L.bottom),N=p,L.bottom<O.top&&w(N,L.bottom,null,O.top));null==F&&J==C&&(K=o);if(!B||L.top<B.top||L.top==B.top&&L.left<B.left){B=L}if(!G||O.bottom>G.bottom||O.bottom==G.bottom&&O.right>G.right){G=O}N<p+1&&(N=p);w(N,O.top,K-N,O.bottom)});return{start:B,end:G}}var u=z.display,t=z.doc,r=document.createDocumentFragment(),q=gh(z.display),p=q.left,o=Math.max(u.sizerWidth,cU(z)-u.sizer.offsetLeft)-q.right,u=y.from(),y=y.to();if(u.line==y.line){v(u.line,u.ch,y.ch)}else{var m=e2(t,u.line),q=e2(t,y.line),q=eO(m)==eO(q),u=v(u.line,u.ch,q?m.text.length+1:null).end,y=v(y.line,q?0:null,y.ch).start;q&&(u.top<y.top-2?(w(u.right,u.top,null,u.bottom),w(p,y.top,y.left,y.bottom)):w(u.right,u.top,y.left-u.right,u.bottom));u.bottom<y.top&&w(p,u.bottom,null,y.top)}x.appendChild(r)}function dw(o){if(o.state.focused){var m=o.display;clearInterval(m.blinker);var p=!0;m.cursorDiv.style.visibility="";0<o.options.cursorBlinkRate?m.blinker=setInterval(function(){m.cursorDiv.style.visibility=(p=!p)?"":"hidden"},o.options.cursorBlinkRate):0>o.options.cursorBlinkRate&&(m.cursorDiv.style.visibility="hidden")}}function fR(o,m){o.doc.mode.startState&&o.doc.frontier<o.display.viewTo&&o.state.highlight.set(m,bl(aF,o))}function aF(o){var m=o.doc;m.frontier<m.first&&(m.frontier=m.first);if(!(m.frontier>=o.display.viewTo)){var r=+new Date+o.options.workTime,q=dX(m.mode,b6(o,m.frontier)),p=[];m.iter(m.frontier,Math.min(m.first+m.size,o.display.viewTo+500),function(w){if(m.frontier>=o.display.viewFrom){var v=w.styles,u=fM(o,w,q,true);w.styles=u.styles;var t=w.styleClasses;if(u=u.classes){w.styleClasses=u}else{if(t){w.styleClasses=null}}t=!v||v.length!=w.styles.length||t!=u&&(!t||!u||t.bgClass!=u.bgClass||t.textClass!=u.textClass);for(u=0;!t&&u<v.length;++u){t=v[u]!=w.styles[u]}t&&p.push(m.frontier);w.stateAfter=dX(m.mode,q)}else{di(o,w.text,q);w.stateAfter=m.frontier%5==0?dX(m.mode,q):null}++m.frontier;if(+new Date>r){fR(o,o.options.workDelay);return true}});p.length&&fA(o,function(){for(var t=0;t<p.length;t++){ds(o,p[t],"text")}})}}function at(o,m,v){for(var u,t,r=o.doc,q=v?-1:m-(o.doc.mode.innerMode?1000:100);m>q;--m){if(m<=r.first){return r.first}var p=e2(r,m-1);if(p.stateAfter&&(!v||m<=r.frontier)){return m}p=ft(p.text,null,o.options.tabSize);if(null==t||u>p){t=m-1,u=p}}return t}function b6(o,m,u){var t=o.doc,r=o.display;if(!t.mode.startState){return !0}var q=at(o,m,u),p=q>t.first&&e2(t,q-1).stateAfter,p=p?dX(t.mode,p):I(t.mode);t.iter(q,m,function(v){di(o,v.text,p);v.stateAfter=q==m-1||0==q%5||q>=r.viewFrom&&q<r.viewTo?dX(t.mode,p):null;++q});u&&(t.frontier=q);return p}function gh(o){if(o.cachedPaddingH){return o.cachedPaddingH}var m=fz(o.measure,e3("pre","x")),m=window.getComputedStyle?window.getComputedStyle(m):m.currentStyle,m={left:parseInt(m.paddingLeft),right:parseInt(m.paddingRight)};!isNaN(m.left)&&!isNaN(m.right)&&(o.cachedPaddingH=m);return m}function gl(m){return f4-m.display.nativeBarWidth}function cU(m){return m.display.scroller.clientWidth-gl(m)-m.display.barWidth}function a(m){return m.display.scroller.clientHeight-gl(m)-m.display.barHeight}function dh(o,m,q){if(o.line==m){return{map:o.measure.map,cache:o.measure.cache}}for(var p=0;p<o.rest.length;p++){if(o.rest[p]==m){return{map:o.measure.maps[p],cache:o.measure.caches[p]}}}for(p=0;p<o.rest.length;p++){if(fS(o.rest[p])>q){return{map:o.measure.maps[p],cache:o.measure.caches[p],before:!0}}}}function d8(o,m){if(m>=o.display.viewFrom&&m<o.display.viewTo){return o.display.view[gy(o,m)]}var p=o.display.externalMeasured;if(p&&m>=p.lineN&&m<p.lineN+p.size){return p}}function cj(o,m){var r=fS(m),q=d8(o,r);q&&!q.text?q=null:q&&q.changes&&gB(o,q,r,aC(o));if(!q){var p;p=eO(m);q=fS(p);p=o.display.externalMeasured=new e9(o.doc,p,q);p.lineN=q;q=p.built=eR(o,p);p.text=q.pre;fz(o.display.lineMeasure,q.pre);q=p}r=dh(q,m,r);return{line:m,view:q,rect:null,map:r.map,cache:r.cache,before:r.before,hasHeights:!1}}function cY(A,z,y,x,w){z.before&&(y=-1);var v=y+(x||"");if(z.cache.hasOwnProperty(v)){A=z.cache[v]}else{z.rect||(z.rect=z.view.text.getBoundingClientRect());if(!z.hasHeights){var u=z.view,t=z.rect,r=A.options.lineWrapping,q=r&&cU(A);if(!u.measure.heights||r&&u.measure.width!=q){var p=u.measure.heights=[];if(r){u.measure.width=q;u=u.text.firstChild.getClientRects();for(r=0;r<u.length-1;r++){var q=u[r],m=u[r+1];2<Math.abs(q.bottom-m.bottom)&&p.push((q.bottom+m.top)/2-t.top)}}p.push(t.bottom-t.top)}z.hasHeights=!0}var u=x,r=cX(z.map,y,u),x=r.node,t=r.start,q=r.end,y=r.collapse,o;if(3==x.nodeType){for(p=0;4>p;p++){for(;t&&bU(z.line.text.charAt(r.coverStart+t));){--t}for(;r.coverStart+q<r.coverEnd&&bU(z.line.text.charAt(r.coverStart+q));){++q}if(eV&&9>eT&&0==t&&q==r.coverEnd-r.coverStart){o=x.parentNode.getBoundingClientRect()}else{if(eV&&A.options.lineWrapping){var B=br(x,t,q).getClientRects();o=B.length?B["right"==u?B.length-1:0]:cM}else{o=br(x,t,q).getBoundingClientRect()||cM}}if(o.left||o.right||0==t){break}q=t;t-=1;y="right"}if(eV&&11>eT){if(!(B=!window.screen)){if(!(B=null==screen.logicalXDPI)){if(!(B=screen.logicalXDPI==screen.deviceXDPI)){null!=cA?B=cA:(p=fz(A.display.measure,e3("span","x")),B=p.getBoundingClientRect(),p=br(p,0,1).getBoundingClientRect(),B=cA=1<Math.abs(B.left-p.left)),B=!B}}}B||(B=screen.logicalXDPI/screen.deviceXDPI,p=screen.logicalYDPI/screen.deviceYDPI,o={left:o.left*B,right:o.right*B,top:o.top*p,bottom:o.bottom*p})}}else{0<t&&(y=u="right"),o=A.options.lineWrapping&&1<(B=x.getClientRects()).length?B["right"==u?B.length-1:0]:x.getBoundingClientRect()}if(eV&&9>eT&&!t&&(!o||!o.left&&!o.right)){o=(o=x.parentNode.getClientRects()[0])?{left:o.left,right:o.left+fj(A.display),top:o.top,bottom:o.bottom}:cM}B=o.top-z.rect.top;x=o.bottom-z.rect.top;t=(B+x)/2;u=z.view.measure.heights;for(p=0;p<u.length-1&&!(t<u[p]);p++){}y={left:("right"==y?o.right:o.left)-z.rect.left,right:("left"==y?o.left:o.right)-z.rect.left,top:p?u[p-1]:0,bottom:u[p]};!o.left&&!o.right&&(y.bogus=!0);A.options.singleCursorHeightPerLine||(y.rtop=B,y.rbottom=x);A=y;A.bogus||(z.cache[v]=A)}return{left:A.left,right:A.right,top:w?A.rtop:A.top,bottom:w?A.rbottom:A.bottom}}function cX(x,w,v){for(var u,t,r,q,p=0;p<x.length;p+=3){var o=x[p],m=x[p+1];if(w<o){t=0,r=1,q="left"}else{if(w<m){t=w-o,r=t+1}else{if(p==x.length-3||w==m&&x[p+3]>w){r=m-o,t=r-1,w>=m&&(q="right")}}}if(null!=t){u=x[p+2];if(o==m&&v==(u.insertLeft?"left":"right")){q=v}if("left"==v&&0==t){for(;p&&x[p-2]==x[p-3]&&x[p-1].insertLeft;){u=x[(p-=3)+2],q="left"}}if("right"==v&&t==m-o){for(;p<x.length-3&&x[p+3]==x[p+4]&&!x[p+5].insertLeft;){u=x[(p+=3)+2],q="right"}}break}}return{node:u,start:t,end:r,collapse:q,coverStart:o,coverEnd:m}}function eK(o){if(o.measure&&(o.measure.cache={},o.measure.heights=null,o.rest)){for(var m=0;m<o.rest.length;m++){o.measure.caches[m]={}}}}function ex(o){o.display.externalMeasure=null;ay(o.display.lineMeasure);for(var m=0;m<o.display.view.length;m++){eK(o.display.view[m])}}function eN(m){ex(m);m.display.cachedCharWidth=m.display.cachedTextHeight=m.display.cachedPaddingH=null;m.options.lineWrapping||(m.display.maxLineChanged=!0);m.display.lineNumChars=null}function ci(o,m,t,r){if(m.widgets){for(var q=0;q<m.widgets.length;++q){if(m.widgets[q].above){var p=bI(m.widgets[q]);t.top+=p;t.bottom+=p}}}if("line"==r){return t}r||(r="local");m=d4(m);m="local"==r?m+o.display.lineSpace.offsetTop:m-o.display.viewOffset;if("page"==r||"window"==r){o=o.display.lineSpace.getBoundingClientRect(),m+=o.top+("window"==r?0:window.pageYOffset||(document.documentElement||document.body).scrollTop),r=o.left+("window"==r?0:window.pageXOffset||(document.documentElement||document.body).scrollLeft),t.left+=r,t.right+=r}t.top+=m;t.bottom+=m;return t}function ek(o,m,q){if("div"==q){return m}var p=m.left,m=m.top;if("page"==q){p-=window.pageXOffset||(document.documentElement||document.body).scrollLeft,m-=window.pageYOffset||(document.documentElement||document.body).scrollTop}else{if("local"==q||!q){q=o.display.sizer.getBoundingClientRect(),p+=q.left,m+=q.top}}o=o.display.lineSpace.getBoundingClientRect();return{left:p-o.left,top:m-o.top}}function cB(o,m,r,q,p){q||(q=e2(o.doc,m.line));return ci(o,q,cY(o,cj(o,q),m.ch,p),r)}function dE(x,w,v,u,t,r){function q(y,A){var z=cY(x,t,y,A?"right":"left",r);A?z.left=z.right:z.right=z.left;return ci(x,u,z,v)}function p(z,y){var B=o[y],A=B.level%2;z==(B.level%2?B.to:B.from)&&y&&B.level<o[y-1].level?(B=o[--y],z=bZ(B)-(B.level%2?0:1),A=!0):z==bZ(B)&&(y<o.length-1&&B.level<o[y+1].level)&&(B=o[++y],z=(B.level%2?B.to:B.from)-B.level%2,A=!1);return A&&z==B.to&&z>B.from?q(z-1):q(z,A)}u=u||e2(x.doc,w.line);t||(t=cj(x,u));var o=fv(u),w=w.ch;if(!o){return q(w)}var m=dW(o,w),m=p(w,m);null!=bw&&(m.other=p(w,bw));return m}function d0(o,m){var r=0,m=e1(o.doc,m);o.options.lineWrapping||(r=fj(o.display)*m.ch);var q=e2(o.doc,m.line),p=d4(q)+o.display.lineSpace.offsetTop;return{left:r,right:r,top:p,bottom:p+q.height}}function b0(o,m,q,p){o=e5(o,m);o.xRel=p;q&&(o.outside=!0);return o}function bN(o,m,t){var r=o.doc,t=t+o.display.viewOffset;if(0>t){return b0(r.first,0,!0,-1)}var q=i(r,t),p=r.first+r.size-1;if(q>p){return b0(r.first+r.size-1,e2(r,p).text.length,!0,1)}0>m&&(m=0);for(r=e2(r,q);;){if(q=d(o,r,q,m,t),p=(r=al(r,!1))&&r.find(0,!0),r&&(q.ch>p.from.ch||q.ch==p.from.ch&&0<q.xRel)){q=fS(r=p.to.line)}else{return q}}}function d(O,N,M,L,K){function J(m){m=dE(O,e5(M,m),"line",N,E);G=!0;if(H>m.bottom){return m.left-F}if(H<m.top){return m.left+F}G=!1;return m.left}var H=K-d4(N),G=!1,F=2*O.display.wrapper.clientWidth,E=cj(O,N),C=fv(N),z=N.text.length,K=bO(N),B=bC(N),v=J(K),o=G,A=J(B),x=G;if(L>A){return b0(M,B,x,1)}for(;;){if(C?B==K||B==bB(N,K,1):1>=B-K){C=L<v||L-v<=A-L?K:B;for(L-=C==K?v:A;bU(N.text.charAt(C));){++C}return b0(M,C,C==K?o:x,-1>L?-1:1<L?1:0)}var w=Math.ceil(z/2),y=K+w;if(C){for(var y=K,u=0;u<w;++u){y=bB(N,y,1)}}u=J(y);if(u>L){B=y;A=u;if(x=G){A+=1000}z=w}else{K=y,v=u,o=G,z-=w}}}function aW(o){if(null!=o.cachedTextHeight){return o.cachedTextHeight}if(null==a2){a2=e3("pre");for(var m=0;49>m;++m){a2.appendChild(document.createTextNode("x")),a2.appendChild(e3("br"))}a2.appendChild(document.createTextNode("x"))}fz(o.measure,a2);m=a2.offsetHeight/50;3<m&&(o.cachedTextHeight=m);ay(o.measure);return m||1}function fj(o){if(null!=o.cachedCharWidth){return o.cachedCharWidth}var m=e3("span","xxxxxxxxxx"),p=e3("pre",[m]);fz(o.measure,p);m=m.getBoundingClientRect();m=(m.right-m.left)/10;2<m&&(o.cachedCharWidth=m);return m||10}function D(m){m.curOp={cm:m,viewChanged:!1,startHeight:m.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++gt};dK?dK.ops.push(m.curOp):m.curOp.ownsGroup=dK={ops:[m.curOp],delayedCallbacks:[]}}function gs(A){if(A=A.curOp.ownsGroup){try{var z=A.delayedCallbacks,y=0;do{for(;y<z.length;y++){z[y]()}for(var x=0;x<A.ops.length;x++){var w=A.ops[x];if(w.cursorActivityHandlers){for(;w.cursorActivityCalled<w.cursorActivityHandlers.length;){w.cursorActivityHandlers[w.cursorActivityCalled++](w.cm)}}}}while(y<z.length)}finally{dK=null;for(z=0;z<A.ops.length;z++){A.ops[z].cm.curOp=null}A=A.ops;for(z=0;z<A.length;z++){var w=A[z],y=w.cm,v=x=y.display;!v.scrollbarsClipped&&v.scroller.offsetWidth&&(v.nativeBarWidth=v.scroller.offsetWidth-v.scroller.clientWidth,v.heightForcer.style.height=gl(y)+"px",v.sizer.style.marginBottom=-v.nativeBarWidth+"px",v.sizer.style.borderRightWidth=gl(y)+"px",v.scrollbarsClipped=!0);w.updateMaxLine&&gw(y);w.mustUpdate=w.viewChanged||w.forceUpdate||null!=w.scrollTop||w.scrollToPos&&(w.scrollToPos.from.line<x.viewFrom||w.scrollToPos.to.line>=x.viewTo)||x.maxLineChanged&&y.options.lineWrapping;w.update=w.mustUpdate&&new f0(y,w.mustUpdate&&{top:w.scrollTop,ensure:w.scrollToPos},w.forceUpdate)}for(z=0;z<A.length;z++){w=A[z],w.updatedDisplay=w.mustUpdate&&ap(w.cm,w.update)}for(z=0;z<A.length;z++){if(w=A[z],y=w.cm,x=y.display,w.updatedDisplay&&gr(y),w.barMeasure=en(y),x.maxLineChanged&&!y.options.lineWrapping&&(w.adjustWidthTo=cY(y,cj(y,x.maxLine),x.maxLine.text.length,void 0).left+3,y.display.sizerWidth=w.adjustWidthTo,w.barMeasure.scrollWidth=Math.max(x.scroller.clientWidth,x.sizer.offsetLeft+w.adjustWidthTo+gl(y)+y.display.barWidth),w.maxScrollLeft=Math.max(0,x.sizer.offsetLeft+w.adjustWidthTo-cU(y))),w.updatedDisplay||w.selectionChanged){w.preparedSelection=x.input.prepareSelection()}}for(z=0;z<A.length;z++){w=A[z],y=w.cm,null!=w.adjustWidthTo&&(y.display.sizer.style.minWidth=w.adjustWidthTo+"px",w.maxScrollLeft<y.doc.scrollLeft&&f1(y,Math.min(y.display.scroller.scrollLeft,w.maxScrollLeft),!0),y.display.maxLineChanged=!1),w.preparedSelection&&y.display.input.showSelection(w.preparedSelection),w.updatedDisplay&&gq(y,w.barMeasure),(w.updatedDisplay||w.startHeight!=y.doc.height)&&fr(y,w.barMeasure),w.selectionChanged&&dw(y),y.state.focused&&w.updateInput&&y.display.input.reset(w.typing),w.focus&&w.focus==gm()&&er(w.cm)}for(z=0;z<A.length;z++){w=A[z];y=w.cm;x=y.display;v=y.doc;w.updatedDisplay&&ao(y,w.update);if(null!=x.wheelStartX&&(null!=w.scrollTop||null!=w.scrollLeft||w.scrollToPos)){x.wheelStartX=x.wheelStartY=null}if(null!=w.scrollTop&&(x.scroller.scrollTop!=w.scrollTop||w.forceScroll)){v.scrollTop=Math.max(0,Math.min(x.scroller.scrollHeight-x.scroller.clientHeight,w.scrollTop)),x.scrollbars.setScrollTop(v.scrollTop),x.scroller.scrollTop=v.scrollTop}if(null!=w.scrollLeft&&(x.scroller.scrollLeft!=w.scrollLeft||w.forceScroll)){v.scrollLeft=Math.max(0,Math.min(x.scroller.scrollWidth-cU(y),w.scrollLeft)),x.scrollbars.setScrollLeft(v.scrollLeft),x.scroller.scrollLeft=v.scrollLeft,aj(y)}if(w.scrollToPos){var u=void 0,t=e1(v,w.scrollToPos.from),u=e1(v,w.scrollToPos.to),r=w.scrollToPos.margin;null==r&&(r=0);for(var q=0;5>q;q++){var p=!1,m=dE(y,t),o=!u||u==t?m:dE(y,u),o=bk(y,Math.min(m.left,o.left),Math.min(m.top,o.top)-r,Math.max(m.left,o.left),Math.max(m.bottom,o.bottom)+r),C=y.doc.scrollTop,B=y.doc.scrollLeft;null!=o.scrollTop&&(dQ(y,o.scrollTop),1<Math.abs(y.doc.scrollTop-C)&&(p=!0));null!=o.scrollLeft&&(f1(y,o.scrollLeft),1<Math.abs(y.doc.scrollLeft-B)&&(p=!0));if(!p){break}}u=m;if(w.scrollToPos.isCursor&&y.state.focused&&!eB(y,"scrollCursorIntoView")){r=y.display;q=r.sizer.getBoundingClientRect();t=null;if(0>u.top+q.top){t=!0}else{if(u.bottom+q.top>(window.innerHeight||document.documentElement.clientHeight)){t=!1}}null!=t&&!f2&&(u=e3("div","​",null,"position: absolute; top: "+(u.top-r.viewOffset-y.display.lineSpace.offsetTop)+"px; height: "+(u.bottom-u.top+gl(y)+r.barHeight)+"px; left: "+u.left+"px; width: 2px;"),y.display.lineSpace.appendChild(u),u.scrollIntoView(t),y.display.lineSpace.removeChild(u))}}t=w.maybeHiddenMarkers;u=w.maybeUnhiddenMarkers;if(t){for(r=0;r<t.length;++r){t[r].lines.length||fO(t[r],"hide")}}if(u){for(r=0;r<u.length;++r){u[r].lines.length&&fO(u[r],"unhide")}}x.wrapper.offsetHeight&&(v.scrollTop=y.display.scroller.scrollTop);w.changeObjs&&fO(y,"changes",y,w.changeObjs);w.update&&w.update.finish()}}}}function fA(o,m){if(o.curOp){return m()}D(o);try{return m()}finally{gs(o)}}function fU(o,m){return function(){if(o.curOp){return m.apply(o,arguments)}D(o);try{return m.apply(o,arguments)}finally{gs(o)}}}function fH(m){return function(){if(this.curOp){return m.apply(this,arguments)}D(this);try{return m.apply(this,arguments)}finally{gs(this)}}}function fG(m){return function(){var o=this.cm;if(!o||o.curOp){return m.apply(this,arguments)}D(o);try{return m.apply(this,arguments)}finally{gs(o)}}}function e9(o,m,r){for(var q=this.line=m,p;q=al(q,!1);){q=q.find(1,!0).line,(p||(p=[])).push(q)}this.size=(this.rest=p)?fS(eX(this.rest))-r+1:1;this.node=this.text=null;this.hidden=aK(o,m)}function fp(o,m,r){var q=[],p;for(p=m;p<r;){m=new e9(o.doc,e2(o.doc,p),p),p+=m.size,q.push(m)}return q}function fD(o,m,u,t){null==m&&(m=o.doc.first);null==u&&(u=o.doc.first+o.doc.size);t||(t=0);var r=o.display;if(t&&u<r.viewTo&&(null==r.updateLineNumbers||r.updateLineNumbers>m)){r.updateLineNumbers=m}o.curOp.viewChanged=!0;if(m>=r.viewTo){cw&&n(o.doc,m)<r.viewTo&&cI(o)}else{if(u<=r.viewFrom){cw&&aB(o.doc,u+t)>r.viewFrom?cI(o):(r.viewFrom+=t,r.viewTo+=t)}else{if(m<=r.viewFrom&&u>=r.viewTo){cI(o)}else{if(m<=r.viewFrom){var q=cp(o,u,u+t,1);q?(r.view=r.view.slice(q.index),r.viewFrom=q.lineN,r.viewTo+=t):cI(o)}else{if(u>=r.viewTo){(q=cp(o,m,m,-1))?(r.view=r.view.slice(0,q.index),r.viewTo=q.lineN):cI(o)}else{var q=cp(o,m,m,-1),p=cp(o,u,u+t,1);q&&p?(r.view=r.view.slice(0,q.index).concat(fp(o,q.lineN,p.lineN)).concat(r.view.slice(p.index)),r.viewTo+=t):cI(o)}}}}}if(o=r.externalMeasured){u<o.lineN?o.lineN+=t:m<o.lineN+o.size&&(r.externalMeasured=null)}}function ds(o,m,r){o.curOp.viewChanged=!0;var q=o.display,p=o.display.externalMeasured;p&&(m>=p.lineN&&m<p.lineN+p.size)&&(q.externalMeasured=null);m<q.viewFrom||m>=q.viewTo||(o=q.view[gy(o,m)],null!=o.node&&(o=o.changes||(o.changes=[]),-1==fL(o,r)&&o.push(r)))}function cI(m){m.display.viewFrom=m.display.viewTo=m.doc.first;m.display.view=[];m.display.viewOffset=0}function gy(o,m){if(m>=o.display.viewTo){return null}m-=o.display.viewFrom;if(0>m){return null}for(var q=o.display.view,p=0;p<q.length;p++){if(m-=q[p].size,0>m){return p}}}function cp(o,m,v,u){var t=gy(o,m),r=o.display.view;if(!cw||v==o.doc.first+o.doc.size){return{index:t,lineN:v}}for(var q=0,p=o.display.viewFrom;q<t;q++){p+=r[q].size}if(p!=m){if(0<u){if(t==r.length-1){return null}m=p+r[t].size-m;t++}else{m=p-m}v+=m}for(;n(o.doc,v)!=v;){if(t==(0>u?0:r.length-1)){return null}v+=u*r[t-(0>u?1:0)].size;t+=u}return{index:t,lineN:v}}function aN(o){for(var o=o.display.view,m=0,q=0;q<o.length;q++){var p=o[q];!p.hidden&&(!p.node||p.changes)&&++m}return m}function cP(o){function m(){t.activeTouch&&(r=setTimeout(function(){t.activeTouch=null},1000),q=t.activeTouch,q.end=+new Date)}function u(w,v){if(null==v.left){return !0}var y=v.left-w.left,x=v.top-w.top;return 400<y*y+x*x}var t=o.display;e4(t.scroller,"mousedown",fU(o,dN));eV&&11>eT?e4(t.scroller,"dblclick",fU(o,function(v){if(!eB(o,v)){var w=dy(o,v);w&&(!bj(o,v,"gutterClick",!0,fJ)&&!c7(o.display,v))&&(fF(v),v=o.findWordAt(w),dx(o.doc,v.anchor,v.head))}})):e4(t.scroller,"dblclick",function(v){eB(o,v)||fF(v)});co||e4(t.scroller,"contextmenu",function(v){dA(o,v)});var r,q={end:0};e4(t.scroller,"touchstart",function(w){var v;1!=w.touches.length?v=!1:(v=w.touches[0],v=1>=v.radiusX&&1>=v.radiusY);v||(clearTimeout(r),v=+new Date,t.activeTouch={start:v,moved:!1,prev:300>=v-q.end?q:null},1==w.touches.length&&(t.activeTouch.left=w.touches[0].pageX,t.activeTouch.top=w.touches[0].pageY))});e4(t.scroller,"touchmove",function(){t.activeTouch&&(t.activeTouch.moved=!0)});e4(t.scroller,"touchend",function(x){var w=t.activeTouch;if(w&&!c7(t,x)&&null!=w.left&&!w.moved&&300>new Date-w.start){var v=o.coordsChar(t.activeTouch,"page"),w=!w.prev||u(w,w.prev)?new eY(v,v):!w.prev.prev||u(w,w.prev.prev)?o.findWordAt(v):new eY(e5(v.line,0),e1(o.doc,e5(v.line+1,0)));o.setSelection(w.anchor,w.head);o.focus();fF(x)}m()});e4(t.scroller,"touchcancel",m);e4(t.scroller,"scroll",function(){t.scroller.clientHeight&&(dQ(o,t.scroller.scrollTop),f1(o,t.scroller.scrollLeft,!0),fO(o,"scroll",o))});e4(t.scroller,"mousewheel",function(v){dn(o,v)});e4(t.scroller,"DOMMouseScroll",function(v){dn(o,v)});e4(t.wrapper,"scroll",function(){t.wrapper.scrollTop=t.wrapper.scrollLeft=0});t.dragFunctions={simple:function(v){eB(o,v)||gi(v)},start:function(v){if(eV&&(!o.state.draggingText||100>+new Date-c3)){gi(v)}else{if(!eB(o,v)&&!c7(o.display,v)&&(v.dataTransfer.setData("Text",o.getSelection()),v.dataTransfer.setDragImage&&!cQ)){var w=e3("img",null,null,"position: fixed; left: 0; top: 0;");w.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";fs&&(w.width=w.height=1,o.display.wrapper.appendChild(w),w._top=w.offsetTop);v.dataTransfer.setDragImage(w,0,0);fs&&w.parentNode.removeChild(w)}}},drop:fU(o,bm)};var p=t.input.getField();e4(p,"keyup",function(v){cE.call(o,v)});e4(p,"keydown",fU(o,cs));e4(p,"keypress",fU(o,b3));e4(p,"focus",bl(a6,o));e4(p,"blur",bl(cq,o))}function aX(o){var m=o.display;m.lastWrapHeight==m.wrapper.clientHeight&&m.lastWrapWidth==m.wrapper.clientWidth||(m.cachedCharWidth=m.cachedTextHeight=m.cachedPaddingH=null,m.scrollbarsClipped=!1,o.setSize())}function c7(o,m){for(var p=m.target||m.srcElement;p!=o.wrapper;p=p.parentNode){if(!p||1==p.nodeType&&"true"==p.getAttribute("cm-ignore-events")||p.parentNode==o.sizer&&p!=o.mover){return !0}}}function dy(w,v,u,t){var r=w.display;if(!u&&"true"==(v.target||v.srcElement).getAttribute("cm-not-content")){return null}var q,p,u=r.lineSpace.getBoundingClientRect();try{q=v.clientX-u.left,p=v.clientY-u.top}catch(o){return null}var v=bN(w,q,p),m;if(t&&1==v.xRel&&(m=e2(w.doc,v.line).text).length==v.ch){t=ft(m,m.length,w.options.tabSize)-m.length,v=e5(v.line,Math.max(0,Math.round((q-gh(w.display).left)/fj(w.display))-t))}return v}function dN(o){var m=this.display;if(!(m.activeTouch&&m.input.supportsTouch()||eB(this,o))){if(m.shift=o.shiftKey,c7(m,o)){fQ||(m.scroller.draggable=!1,setTimeout(function(){m.scroller.draggable=!0},100))}else{if(!bj(this,o,"gutterClick",!0,fJ)){var p=dy(this,o);window.focus();switch(bR(o)){case 1:p?aL(this,o,p):(o.target||o.srcElement)==m.scroller&&fF(o);break;case 2:fQ&&(this.state.lastMiddleDown=+new Date);p&&dx(this.doc,p);setTimeout(function(){m.input.focus()},20);fF(o);break;case 3:co?dA(this,o):az(this)}}}}}function aL(o,m,u){eV?setTimeout(bl(er,o),0):o.curOp.focus=gm();var t=+new Date,r;gj&&gj.time>t-400&&0==eZ(gj.pos,u)?r="triple":fP&&fP.time>t-400&&0==eZ(fP.pos,u)?(r="double",gj={time:t,pos:u}):(r="single",fP={time:t,pos:u});var t=o.doc.sel,q=fx?m.metaKey:m.ctrlKey,p;o.options.dragDrop&&am&&!d9(o)&&"single"==r&&-1<(p=t.contains(u))&&!t.ranges[p].empty()?j(o,m,u,q):gz(o,m,u,r,q)}function j(o,m,u,t){var r=o.display,q=+new Date,p=fU(o,function(v){fQ&&(r.scroller.draggable=!1);o.state.draggingText=!1;eo(document,"mouseup",p);eo(r.scroller,"drop",p);10>Math.abs(m.clientX-v.clientX)+Math.abs(m.clientY-v.clientY)&&(fF(v),!t&&+new Date-200<q&&dx(o.doc,u),fQ||eV&&9==eT?setTimeout(function(){document.body.focus();r.input.focus()},20):r.input.focus())});fQ&&(r.scroller.draggable=!0);o.state.draggingText=p;r.scroller.dragDrop&&r.scroller.dragDrop();e4(document,"mouseup",p);e4(r.scroller,"drop",p)}function gz(O,N,M,L,K){function J(R){if(0!=eZ(A,R)){if(A=R,"rect"==L){for(var Q=[],P=O.options.tabSize,y=ft(e2(E,M.line).text,M.ch,P),x=ft(e2(E,R.line).text,R.ch,P),u=Math.min(y,x),y=Math.max(y,x),x=Math.min(M.line,R.line),T=Math.min(O.lastLine(),Math.max(M.line,R.line));x<=T;x++){var S=e2(E,x).text,m=bF(S,u,P);u==y?Q.push(new eY(e5(x,m),e5(x,m))):S.length>m&&Q.push(new eY(e5(x,m),e5(x,bF(S,y,P))))}Q.length||Q.push(new eY(M,M));fV(E,fu(B.ranges.slice(0,z).concat(Q),z),{origin:"*mouse",scroll:!1});O.scrollIntoView(R)}else{Q=C,P=Q.anchor,u=R,"single"!=L&&(R="double"==L?O.findWordAt(R):new eY(e5(R.line,0),e1(E,e5(R.line+1,0))),0<eZ(R.anchor,P)?(u=R.head,P=et(Q.from(),R.anchor)):(u=R.anchor,P=eG(Q.to(),R.head))),Q=B.ranges.slice(0),Q[z]=new eY(e1(E,P),u),fV(E,fu(Q,z),fN)}}}function H(m){var y=++t,x=dy(O,m,!0,"rect"==L);if(x){if(0!=eZ(x,A)){O.curOp.focus=gm();J(x);var u=a0(F,E);(x.line>=u.to||x.line<u.from)&&setTimeout(fU(O,function(){t==y&&H(m)}),150)}else{var q=m.clientY<w.top?-20:m.clientY>w.bottom?20:0;q&&setTimeout(fU(O,function(){t==y&&(F.scroller.scrollTop+=q,H(m))}),50)}}}function G(m){t=Infinity;fF(m);F.input.focus();eo(document,"mousemove",o);eo(document,"mouseup",p);E.history.lastSelOrigin=null}var F=O.display,E=O.doc;fF(N);var C,z,B=E.sel,v=B.ranges;K&&!N.shiftKey?(z=E.sel.contains(M),C=-1<z?v[z]:new eY(M,M)):(C=E.sel.primary(),z=E.sel.primIndex);if(N.altKey){L="rect",K||(C=new eY(M,M)),M=dy(O,N,!0,!0),z=-1}else{if("double"==L){var r=O.findWordAt(M);C=O.display.shift||E.extend?cv(E,C,r.anchor,r.head):r}else{"triple"==L?(r=new eY(e5(M.line,0),e1(E,e5(M.line+1,0))),C=O.display.shift||E.extend?cv(E,C,r.anchor,r.head):r):C=cv(E,C,M)}}K?-1==z?(z=v.length,fV(E,fu(v.concat([C]),z),{scroll:!1,origin:"*mouse"})):1<v.length&&v[z].empty()&&"single"==L&&!N.shiftKey?(fV(E,fu(v.slice(0,z).concat(v.slice(z+1)),0)),B=E.sel):dI(E,z,C,fN):(z=0,fV(E,new dR([C],0),fN),B=E.sel);var A=M,w=F.wrapper.getBoundingClientRect(),t=0,o=fU(O,function(m){bR(m)?H(m):G(m)}),p=fU(O,G);e4(document,"mousemove",o);e4(document,"mouseup",p)}function bj(x,w,v,u,t){try{var r=w.clientX,q=w.clientY}catch(p){return !1}if(r>=Math.floor(x.display.gutters.getBoundingClientRect().right)){return !1}u&&fF(w);var u=x.display,o=u.lineDiv.getBoundingClientRect();if(q>o.bottom||!fB(x,v)){return fh(w)}q-=o.top-u.viewOffset;for(o=0;o<x.options.gutters.length;++o){var m=u.gutters.childNodes[o];if(m&&m.getBoundingClientRect().right>=r){return r=i(x.doc,q),t(x,v,x,r,x.options.gutters[o],w),fh(w)}}}function bm(x){var w=this;if(!eB(w,x)&&!c7(w.display,x)){fF(x);eV&&(c3=+new Date);var v=dy(w,x,!0),u=x.dataTransfer.files;if(v&&!d9(w)){if(u&&u.length&&window.FileReader&&window.File){for(var t=u.length,r=Array(t),q=0,x=function(y,A){var z=new FileReader;z.onload=fU(w,function(){r[A]=z.result;if(++q==t){v=e1(w.doc,v);var B={from:v,to:v,text:b7(r.join("\n")),origin:"paste"};eW(w.doc,B);cz(w.doc,fT(v,bV(B)))}});z.readAsText(y)},p=0;p<t;++p){x(u[p],p)}}else{if(w.state.draggingText&&-1<w.doc.sel.contains(v)){w.state.draggingText(x),setTimeout(function(){w.display.input.focus()},20)}else{try{if(r=x.dataTransfer.getData("Text")){if(w.state.draggingText&&!(fx?x.altKey:x.ctrlKey)){var o=w.listSelections()}dj(w.doc,fT(v,v));if(o){for(p=0;p<o.length;++p){a7(w.doc,"",o[p].anchor,o[p].head,"drag")}}w.replaceSelection(r,"around","paste");w.display.input.focus()}}catch(m){}}}}}}function dQ(o,m){2>Math.abs(o.doc.scrollTop-m)||(o.doc.scrollTop=m,a8||fZ(o,{top:m}),o.display.scroller.scrollTop!=m&&(o.display.scroller.scrollTop=m),o.display.scrollbars.setScrollTop(m),a8&&fZ(o),fR(o,100))}function f1(o,m,p){if(!(p?m==o.doc.scrollLeft:2>Math.abs(o.doc.scrollLeft-m))){m=Math.min(m,o.display.scroller.scrollWidth-o.display.scroller.clientWidth),o.doc.scrollLeft=m,aj(o),o.display.scroller.scrollLeft!=m&&(o.display.scroller.scrollLeft=m),o.display.scrollbars.setScrollLeft(m)}}function dn(w,v){var u=bt(v),t=u.x,u=u.y,r=w.display,q=r.scroller;if(t&&q.scrollWidth>q.clientWidth||u&&q.scrollHeight>q.clientHeight){if(u&&fx&&fQ){var p=v.target,o=r.view;w:for(;p!=q;p=p.parentNode){for(var m=0;m<o.length;m++){if(o[m].node==p){w.display.currentWheelTarget=p;break w}}}}if(t&&!a8&&!fs&&null!=fC){u&&dQ(w,Math.max(0,Math.min(q.scrollTop+u*fC,q.scrollHeight-q.clientHeight))),f1(w,Math.max(0,Math.min(q.scrollLeft+t*fC,q.scrollWidth-q.clientWidth))),fF(v),r.wheelStartX=null}else{if(u&&null!=fC&&(p=u*fC,o=w.doc.scrollTop,m=o+r.wrapper.clientHeight,0>p?o=Math.max(0,o+p-50):m=Math.min(w.doc.height,m+p+50),fZ(w,{top:o,bottom:m})),20>fi){null==r.wheelStartX?(r.wheelStartX=q.scrollLeft,r.wheelStartY=q.scrollTop,r.wheelDX=t,r.wheelDY=u,setTimeout(function(){if(r.wheelStartX!=null){var y=q.scrollLeft-r.wheelStartX,x=q.scrollTop-r.wheelStartY,y=x&&r.wheelDY&&x/r.wheelDY||y&&r.wheelDX&&y/r.wheelDX;r.wheelStartX=r.wheelStartY=null;if(y){fC=(fC*fi+y)/(fi+1);++fi}}},200)):(r.wheelDX+=t,r.wheelDY+=u)}}}}function eM(o,m,r){if("string"==typeof m&&(m=ez[m],!m)){return !1}o.display.input.ensurePolled();var q=o.display.shift,p=!1;try{d9(o)&&(o.state.suppressEdits=!0),r&&(o.display.shift=!1),p=m(o)!=a4}finally{o.display.shift=q,o.state.suppressEdits=!1}return p}function gn(o,m,r){for(var q=0;q<o.state.keyMaps.length;q++){var p=aV(m,o.state.keyMaps[q],r,o);if(p){return p}}return o.options.extraKeys&&aV(m,o.options.extraKeys,r,o)||aV(m,o.options.keyMap,r,o)}function em(o,m,r,q){var p=o.state.keySeq;if(p){if(fW(m)){return"handled"}fl.set(50,function(){o.state.keySeq==p&&(o.state.keySeq=null,o.display.input.reset())});m=p+" "+m}q=gn(o,m,q);"multi"==q&&(o.state.keySeq=m);"handled"==q&&fJ(o,"keyHandled",o,m,r);if("handled"==q||"multi"==q){fF(r),dw(o)}return p&&!q&&/\'$/.test(m)?(fF(r),!0):!!q}function aS(o,m){var p=eP(m,!0);return !p?!1:m.shiftKey&&!o.state.keySeq?em(o,"Shift-"+p,m,function(q){return eM(o,q,true)})||em(o,p,m,function(q){if(typeof q=="string"?/^go[A-Z]/.test(q):q.motion){return eM(o,q)}}):em(o,p,m,function(q){return eM(o,q)})}function eC(o,m,p){return em(o,"'"+p+"'",m,function(q){return eM(o,q,!0)})}function cs(o){this.curOp.focus=gm();if(!eB(this,o)){eV&&(11>eT&&27==o.keyCode)&&(o.returnValue=!1);var m=o.keyCode;this.display.shift=16==m||o.shiftKey;var p=aS(this,o);fs&&(eL=p?m:null,!p&&(88==m&&!aG&&(fx?o.metaKey:o.ctrlKey))&&this.replaceSelection("",null,"cut"));18==m&&!/\bCodeMirror-crosshair\b/.test(this.display.lineDiv.className)&&ep(this)}}function ep(o){function m(q){if(18==q.keyCode||!q.altKey){d3(p,"CodeMirror-crosshair"),eo(document,"keyup",m),eo(document,"mouseover",m)}}var p=o.display.lineDiv;dD(p,"CodeMirror-crosshair");e4(document,"keyup",m);e4(document,"mouseover",m)}function cE(m){16==m.keyCode&&(this.doc.sel.shift=!1);eB(this,m)}function b3(o){if(!c7(this.display,o)&&!eB(this,o)&&!(o.ctrlKey&&!o.altKey||fx&&o.metaKey)){var m=o.keyCode,p=o.charCode;if(fs&&m==eL){eL=null,fF(o)}else{if(!fs||o.which&&!(10>o.which)||!aS(this,o)){if(m=String.fromCharCode(null==p?m:p),!eC(this,o,m)){this.display.input.onKeyPress(o)}}}}}function az(m){m.state.delayingBlurEvent=!0;setTimeout(function(){m.state.delayingBlurEvent&&(m.state.delayingBlurEvent=!1,cq(m))},100)}function a6(m){m.state.delayingBlurEvent&&(m.state.delayingBlurEvent=!1);"nocursor"!=m.options.readOnly&&(m.state.focused||(fO(m,"focus",m),m.state.focused=!0,dD(m.display.wrapper,"CodeMirror-focused"),!m.curOp&&m.display.selForContextMenu!=m.doc.sel&&(m.display.input.reset(),fQ&&setTimeout(function(){m.display.input.reset(true)},20)),m.display.input.receivedFocus()),dw(m))}function cq(m){m.state.delayingBlurEvent||(m.state.focused&&(fO(m,"blur",m),m.state.focused=!1,d3(m.display.wrapper,"CodeMirror-focused")),clearInterval(m.display.blinker),setTimeout(function(){if(!m.state.focused){m.display.shift=false}},150))}function dA(o,m){var p;if(!(p=c7(o.display,m))){p=fB(o,"gutterContextMenu")?bj(o,m,"gutterContextMenu",!1,fO):!1}if(!p){o.display.input.onContextMenu(m)}}function au(o,m){if(0>eZ(o,m.from)){return o}if(0>=eZ(o,m.to)){return bV(m)}var q=o.line+m.text.length-(m.to.line-m.from.line)-1,p=o.ch;o.line==m.to.line&&(p+=bV(m).ch-m.to.ch);return e5(q,p)}function ey(o,m){for(var r=[],q=0;q<o.sel.ranges.length;q++){var p=o.sel.ranges[q];r.push(new eY(au(p.anchor,m),au(p.head,m)))}return fu(r,o.sel.primIndex)}function ah(o,m,p){return o.line==m.line?e5(p.line,o.ch-m.ch+p.ch):e5(p.line+(o.line-m.line),o.ch)}function e(o,m,p){m={canceled:!1,from:m.from,to:m.to,text:m.text,origin:m.origin,cancel:function(){this.canceled=!0}};p&&(m.update=function(q,u,t,r){q&&(this.from=e1(o,q));u&&(this.to=e1(o,u));t&&(this.text=t);void 0!==r&&(this.origin=r)});fO(o,"beforeChange",o,m);o.cm&&fO(o.cm,"beforeChange",o.cm,m);return m.canceled?null:{from:m.from,to:m.to,text:m.text,origin:m.origin}}function eW(o,m,q){if(o.cm){if(!o.cm.curOp){return fU(o.cm,eW)(o,m,q)}if(o.cm.state.suppressEdits){return}}if(fB(o,"beforeChange")||o.cm&&fB(o.cm,"beforeChange")){if(m=e(o,m,!0),!m){return}}if(q=gu&&!q&&d5(o,m.from,m.to)){for(var p=q.length-1;0<=p;--p){f3(o,{from:q[p].from,to:q[p].to,text:p?[""]:m.text})}}else{f3(o,m)}}function f3(o,m){if(!(1==m.text.length&&""==m.text[0]&&0==eZ(m.from,m.to))){var q=ey(o,m);bn(o,m,q,o.cm?o.cm.curOp.id:NaN);aJ(o,m,q,el(o,m));var p=[];aQ(o,function(r,t){!t&&-1==fL(p,r.history)&&(aY(r.history,m),p.push(r.history));aJ(r,m,null,el(r,m))})}}function d2(y,x,w){if(!y.cm||!y.cm.state.suppressEdits){for(var v=y.history,u,t=y.sel,r="undo"==x?v.done:v.undone,q="undo"==x?v.undone:v.done,p=0;p<r.length&&!(u=r[p],w?u.ranges&&!u.equals(y.sel):!u.ranges);p++){}if(p!=r.length){for(v.lastOrigin=v.lastSelOrigin=null;;){if(u=r.pop(),u.ranges){cZ(u,q);if(w&&!u.equals(y.sel)){fV(y,u,{clearRedo:!1});return}t=u}else{break}}w=[];cZ(t,q);q.push({changes:w,generation:v.generation});v.generation=u.generation||++v.maxGeneration;v=fB(y,"beforeChange")||y.cm&&fB(y.cm,"beforeChange");for(p=u.changes.length-1;0<=p;--p){var o=u.changes[p];o.origin=x;if(v&&!e(y,o,!1)){r.length=0;break}w.push(d1(y,o));t=p?ey(y,o):eX(r);aJ(y,o,t,aM(y,o));!p&&y.cm&&y.cm.scrollIntoView({from:o.from,to:bV(o)});var m=[];aQ(y,function(A,z){!z&&-1==fL(m,A.history)&&(aY(A.history,o),m.push(A.history));aJ(A,o,null,aM(A,o))})}}}}function aA(o,m){if(0!=m&&(o.first+=m,o.sel=new dR(c6(o.sel.ranges,function(r){return new eY(e5(r.anchor.line+m,r.anchor.ch),e5(r.head.line+m,r.head.ch))}),o.sel.primIndex),o.cm)){fD(o.cm,o.first,o.first-m,m);for(var q=o.cm.display,p=q.viewFrom;p<q.viewTo;p++){ds(o.cm,p,"gutter")}}}function aJ(o,m,r,q){if(o.cm&&!o.cm.curOp){return fU(o.cm,aJ)(o,m,r,q)}if(m.to.line<o.first){aA(o,m.text.length-1-(m.to.line-m.from.line))}else{if(!(m.from.line>o.lastLine())){if(m.from.line<o.first){var p=m.text.length-1-(o.first-m.from.line);aA(o,p);m={from:e5(o.first,0),to:e5(m.to.line+p,m.to.ch),text:[eX(m.text)],origin:m.origin}}p=o.lastLine();m.to.line>p&&(m={from:m.from,to:e5(p,e2(o,p).text.length),text:[m.text[0]],origin:m.origin});m.removed=f7(o,m.from,m.to);r||(r=ey(o,m));o.cm?dS(o.cm,m,q):dO(o,m,q);dj(o,r,fk)}}}function dS(w,v,u){var t=w.doc,r=w.display,q=v.from,p=v.to,o=!1,m=q.line;w.options.lineWrapping||(m=fS(eO(e2(t,q.line))),t.iter(m,p.line+1,function(x){if(x==r.maxLine){return o=!0}}));-1<t.sel.contains(v.from,v.to)&&bA(w);dO(t,v,u,bo(w));w.options.lineWrapping||(t.iter(m,q.line+v.text.length,function(y){var x=b(y);if(x>r.maxLineLength){r.maxLine=y;r.maxLineLength=x;r.maxLineChanged=true;o=false}}),o&&(w.curOp.updateMaxLine=!0));t.frontier=Math.min(t.frontier,q.line);fR(w,400);u=v.text.length-(p.line-q.line)-1;v.full?fD(w):q.line==p.line&&1==v.text.length&&!an(w.doc,v)?ds(w,q.line,"text"):fD(w,q.line,p.line+1,u);u=fB(w,"changes");if((t=fB(w,"change"))||u){v={from:q,to:p,text:v.text,removed:v.removed,origin:v.origin},t&&fJ(w,"change",w,v),u&&(w.curOp.changeObjs||(w.curOp.changeObjs=[])).push(v)}w.display.selForContextMenu=null}function a7(o,m,t,r,q){r||(r=t);if(0>eZ(r,t)){var p=r,r=t,t=p}"string"==typeof m&&(m=b7(m));eW(o,{from:t,to:r,text:m,origin:q})}function bk(z,y,x,w,v){var u=z.display,t=aW(z.display);0>x&&(x=0);var r=z.curOp&&null!=z.curOp.scrollTop?z.curOp.scrollTop:u.scroller.scrollTop,q=a(z),p={};v-x>q&&(v=x+q);var o=z.doc.height+(u.mover.offsetHeight-u.lineSpace.offsetHeight),m=x<t,t=v>o-t;x<r?p.scrollTop=m?0:x:v>r+q&&(x=Math.min(x,(t?o:v)-q),x!=r&&(p.scrollTop=x));r=z.curOp&&null!=z.curOp.scrollLeft?z.curOp.scrollLeft:u.scroller.scrollLeft;z=cU(z)-(z.options.fixedGutter?u.gutters.offsetWidth:0);(u=w-y>z)&&(w=y+z);10>y?p.scrollLeft=0:y<r?p.scrollLeft=Math.max(0,y-(u?0:10)):w>z+r-3&&(p.scrollLeft=w+(u?0:10)-z);return p}function dB(o,m,p){(null!=m||null!=p)&&dP(o);null!=m&&(o.curOp.scrollLeft=(null==o.curOp.scrollLeft?o.doc.scrollLeft:o.curOp.scrollLeft)+m);null!=p&&(o.curOp.scrollTop=(null==o.curOp.scrollTop?o.doc.scrollTop:o.curOp.scrollTop)+p)}function eH(o){dP(o);var m=o.getCursor(),q=m,p=m;o.options.lineWrapping||(q=m.ch?e5(m.line,m.ch-1):m,p=e5(m.line,m.ch+1));o.curOp.scrollToPos={from:q,to:p,margin:o.options.cursorScrollMargin,isCursor:!0}}function dP(o){var m=o.curOp.scrollToPos;if(m){o.curOp.scrollToPos=null;var q=d0(o,m.from),p=d0(o,m.to),m=bk(o,Math.min(q.left,p.left),Math.min(q.top,p.top)-m.margin,Math.max(q.right,p.right),Math.max(q.bottom,p.bottom)+m.margin);o.scrollTo(m.scrollLeft,m.scrollTop)}}function cT(y,x,w,v){var u=y.doc,t;null==w&&(w="add");"smart"==w&&(u.mode.indent?t=b6(y,x):w="prev");var r=y.options.tabSize,q=e2(u,x),p=ft(q.text,null,r);q.stateAfter&&(q.stateAfter=null);var o=q.text.match(/^\s*/)[0],m;if(!v&&!/\S/.test(q.text)){m=0,w="not"}else{if("smart"==w&&(m=u.mode.indent(t,q.text.slice(o.length),q.text),m==a4||150<m)){if(!v){return}w="prev"}}"prev"==w?m=x>u.first?ft(e2(u,x-1).text,null,r):0:"add"==w?m=p+y.options.indentUnit:"subtract"==w?m=p-y.options.indentUnit:"number"==typeof w&&(m=p+w);m=Math.max(0,m);w="";v=0;if(y.options.indentWithTabs){for(y=Math.floor(m/r);y;--y){v+=r,w+="\t"}}v<m&&(w+=k(m-v));if(w!=o){return a7(u,w,e5(x,0),e5(x,o.length),"+input"),q.stateAfter=null,!0}for(y=0;y<u.sel.ranges.length;y++){if(r=u.sel.ranges[y],r.head.line==x&&r.head.ch<o.length){v=e5(x,o.length);dI(u,y,new eY(v,v));break}}}function dC(o,m,t,r){var q=m,p=m;"number"==typeof m?p=e2(o,Math.max(o.first,Math.min(m,o.first+o.size-1))):q=fS(m);if(null==q){return null}r(p,q)&&o.cm&&ds(o.cm,q,t);return p}function dk(o,m){for(var u=o.doc.sel.ranges,t=[],r=0;r<u.length;r++){for(var q=m(u[r]);t.length&&0>=eZ(q.from,eX(t).to);){var p=t.pop();if(0>eZ(p.from,q.from)){q.from=p.from;break}}t.push(q)}fA(o,function(){for(var v=t.length-1;0<=v;v--){a7(o.doc,"",t[v].from,t[v].to,"+delete")}eH(o)})}function dp(A,z,y,x,w){function v(C){var E=(w?bB:gA)(q,t,y,!0);if(null==E){if(C=!C){C=u+y,C<A.first||C>=A.first+A.size?C=p=!1:(u=C,C=q=e2(A,C))}if(C){t=w?(0>y?bC:bO)(q):0>y?q.text.length:0}else{return p=!1}}else{t=E}return !0}var u=z.line,t=z.ch,r=y,q=e2(A,u),p=!0;if("char"==x){v()}else{if("column"==x){v(!0)}else{if("word"==x||"group"==x){for(var m=null,x="group"==x,z=A.cm&&A.cm.getHelper(z,"wordChars"),o=!0;!(0>y)||v(!o);o=!1){var B=q.text.charAt(t)||"\n",B=dq(B,z)?"w":x&&"\n"==B?"n":!x||/\s/.test(B)?null:"p";x&&(!o&&!B)&&(B="s");if(m&&m!=B){0>y&&(y=1,v());break}B&&(m=B);if(0<y&&!v(!o)){break}}}}}r=cN(A,e5(u,t),r,!0);p||(r.hitSide=!0);return r}function go(o,m,v,u){var t=o.doc,r=m.left,q;"page"==u?(u=Math.min(o.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),q=m.top+v*(u-(0>v?1.5:0.5)*aW(o.display))):"line"==u&&(q=0<v?m.bottom+3:m.top-3);for(;;){var p=bN(o,r,q);if(!p.outside){break}if(0>v?0>=q:q>=t.height){p.hitSide=!0;break}q+=5*v}return p}function e0(o,m,q,p){e6.defaults[o]=m;q&&(c[o]=p?function(t,r,u){u!=f&&q(t,r,u)}:q)}function dF(o){for(var m=o.split(/-(?!$)/),o=m[m.length-1],v,u,t,r,q=0;q<m.length-1;q++){var p=m[q];if(/^(cmd|meta|m)$/i.test(p)){r=!0}else{if(/^a(lt)?$/i.test(p)){v=!0}else{if(/^(c|ctrl|control)$/i.test(p)){u=!0}else{if(/^s(hift)$/i.test(p)){t=!0}else{throw Error("Unrecognized modifier name: "+p)}}}}}v&&(o="Alt-"+o);u&&(o="Ctrl-"+o);r&&(o="Cmd-"+o);t&&(o="Shift-"+o);return o}function c5(m){return"string"==typeof m?bJ[m]:m}function c0(w,v,u,t,r){if(t&&t.shared){return dt(w,v,u,t,r)}if(w.cm&&!w.cm.curOp){return fU(w.cm,c0)(w,v,u,t,r)}var q=new aE(w,r),r=eZ(v,u);t&&fy(t,q,!1);if(0<r||0==r&&!1!==q.clearWhenEmpty){return q}q.replacedWith&&(q.collapsed=!0,q.widgetNode=e3("span",[q.replacedWith],"CodeMirror-widget"),t.handleMouseEvents||q.widgetNode.setAttribute("cm-ignore-events","true"),t.insertLeft&&(q.widgetNode.insertLeft=!0));if(q.collapsed){if(fX(w,v.line,v,u,q)||v.line!=u.line&&fX(w,u.line,v,u,q)){throw Error("Inserting collapsed marker partially overlapping an existing one")}cw=!0}q.addToHistory&&bn(w,{from:v,to:u,origin:"markText"},w.sel,NaN);var p=v.line,o=w.cm,m;w.iter(p,u.line+1,function(x){o&&(q.collapsed&&!o.options.lineWrapping&&eO(x)==o.display.maxLine)&&(m=true);q.collapsed&&p!=v.line&&fq(x,0);var y=new cS(q,p==v.line?v.ch:null,p==u.line?u.ch:null);x.markedSpans=x.markedSpans?x.markedSpans.concat([y]):[y];y.marker.attachLine(x);++p});q.collapsed&&w.iter(v.line,u.line+1,function(x){aK(w,x)&&fq(x,0)});q.clearOnEnter&&e4(q,"beforeCursorEnter",function(){q.clear()});q.readOnly&&(gu=!0,(w.history.done.length||w.history.undone.length)&&w.clearHistory());q.collapsed&&(q.id=++c4,q.atomic=!0);if(o){m&&(o.curOp.updateMaxLine=!0);if(q.collapsed){fD(o,v.line,u.line+1)}else{if(q.className||q.title||q.startStyle||q.endStyle||q.css){for(t=v.line;t<=u.line;t++){ds(o,t,"text")}}}q.atomic&&bi(o.doc);fJ(o,"markerAdded",o,q)}return q}function dt(o,m,v,u,t){u=fy(u);u.shared=!1;var r=[c0(o,m,v,u,t)],q=r[0],p=u.widgetNode;aQ(o,function(w){p&&(u.widgetNode=p.cloneNode(!0));r.push(c0(w,e1(w,m),e1(w,v),u,t));for(var x=0;x<w.linked.length;++x){if(w.linked[x].isParent){return}}q=eX(r)});return new cG(r,q)}function fm(m){return m.findMarks(e5(m.first,0),m.clipPos(e5(m.lastLine())),function(o){return o.parent})}function c8(o){for(var m=0;m<o.length;m++){var t=o[m],r=[t.primary.doc];aQ(t.primary.doc,function(u){r.push(u)});for(var q=0;q<t.markers.length;q++){var p=t.markers[q];-1==fL(r,p.doc)&&(p.parent=null,t.markers.splice(q--,1))}}}function cS(o,m,p){this.marker=o;this.from=m;this.to=p}function ax(o,m){if(o){for(var q=0;q<o.length;++q){var p=o[q];if(p.marker==m){return p}}}}function el(A,z){if(z.full){return null}var y=cH(A,z.from.line)&&e2(A,z.from.line).markedSpans,x=cH(A,z.to.line)&&e2(A,z.to.line).markedSpans;if(!y&&!x){return null}var w=z.from.ch,v=z.to.ch,u=0==eZ(z.from,z.to);if(y){for(var t=0,r;t<y.length;++t){var q=y[t],p=q.marker;if(null==q.from||(p.inclusiveLeft?q.from<=w:q.from<w)||q.from==w&&"bookmark"==p.type&&(!u||!q.marker.insertLeft)){var m=null==q.to||(p.inclusiveRight?q.to>=w:q.to>w);(r||(r=[])).push(new cS(p,q.from,m?null:q.to))}}}y=r;if(x){for(var t=0,o;t<x.length;++t){if(r=x[t],q=r.marker,null==r.to||(q.inclusiveRight?r.to>=v:r.to>v)||r.from==v&&"bookmark"==q.type&&(!u||r.marker.insertLeft)){p=null==r.from||(q.inclusiveLeft?r.from<=v:r.from<v),(o||(o=[])).push(new cS(q,p?null:r.from-v,null==r.to?null:r.to-v))}}}x=o;u=1==z.text.length;o=eX(z.text).length+(u?w:0);if(y){for(v=0;v<y.length;++v){t=y[v],null==t.to&&((r=ax(x,t.marker))?u&&(t.to=null==r.to?null:r.to+o):t.to=w)}}if(x){for(v=0;v<x.length;++v){(t=x[v],null!=t.to&&(t.to+=o),null==t.from)?(r=ax(y,t.marker),r||(t.from=o,u&&(y||(y=[])).push(t))):(t.from+=o,u&&(y||(y=[])).push(t))}}y&&(y=eQ(y));x&&x!=y&&(x=eQ(x));w=[y];if(!u){var u=z.text.length-2,B;if(0<u&&y){for(v=0;v<y.length;++v){null==y[v].to&&(B||(B=[])).push(new cS(y[v].marker,null,null))}}for(v=0;v<u;++v){w.push(B)}w.push(x)}return w}function eQ(o){for(var m=0;m<o.length;++m){var p=o[m];null!=p.from&&(p.from==p.to&&!1!==p.marker.clearWhenEmpty)&&o.splice(m--,1)}return !o.length?null:o}function aM(x,w){var v;if(v=w["spans_"+x.id]){for(var u=0,t=[];u<w.text.length;++u){t.push(cV(v[u]))}v=t}else{v=null}u=el(x,w);if(!v){return u}if(!u){return v}for(t=0;t<v.length;++t){var r=v[t],q=u[t];if(r&&q){var p=0;x:for(;p<q.length;++p){for(var o=q[p],m=0;m<r.length;++m){if(r[m].marker==o.marker){continue x}}r.push(o)}}else{q&&(v[t]=q)}}return v}function d5(x,w,v){var u=null;x.iter(w.line,v.line+1,function(z){if(z.markedSpans){for(var y=0;y<z.markedSpans.length;++y){var A=z.markedSpans[y].marker;if(A.readOnly&&(!u||-1==fL(u,A))){(u||(u=[])).push(A)}}}});if(!u){return null}x=[{from:w,to:v}];for(w=0;w<u.length;++w){for(var v=u[w],t=v.find(0),r=0;r<x.length;++r){var q=x[r];if(!(0>eZ(q.to,t.from)||0<eZ(q.from,t.to))){var p=[r,1],o=eZ(q.from,t.from),m=eZ(q.to,t.to);(0>o||!v.inclusiveLeft&&!o)&&p.push({from:q.from,to:t.from});(0<m||!v.inclusiveRight&&!m)&&p.push({from:t.to,to:q.to});x.splice.apply(x,p);r+=p.length-1}}}return x}function eD(o){var m=o.markedSpans;if(m){for(var p=0;p<m.length;++p){m[p].marker.detachLine(o)}o.markedSpans=null}}function eq(o,m){if(m){for(var p=0;p<m.length;++p){m[p].marker.attachLine(o)}o.markedSpans=m}}function d6(o,m){var r=o.lines.length-m.lines.length;if(0!=r){return r}var r=o.find(),q=m.find(),p=eZ(r.from,q.from)||(o.inclusiveLeft?-1:0)-(m.inclusiveLeft?-1:0);return p?-p:(r=eZ(r.to,q.to)||(o.inclusiveRight?1:0)-(m.inclusiveRight?1:0))?r:m.id-o.id}function al(o,m){var t=cw&&o.markedSpans,r;if(t){for(var q,p=0;p<t.length;++p){if(q=t[p],q.marker.collapsed&&null==(m?q.from:q.to)&&(!r||0>d6(r,q.marker))){r=q.marker}}}return r}function fX(w,v,u,t,r){w=e2(w,v);if(w=cw&&w.markedSpans){for(v=0;v<w.length;++v){var q=w[v];if(q.marker.collapsed){var p=q.marker.find(0),o=eZ(p.from,u)||(q.marker.inclusiveLeft?-1:0)-(r.inclusiveLeft?-1:0),m=eZ(p.to,t)||(q.marker.inclusiveRight?1:0)-(r.inclusiveRight?1:0);if(!(0<=o&&0>=m||0>=o&&0<=m)){if(0>=o&&(0<eZ(p.to,u)||q.marker.inclusiveRight&&r.inclusiveLeft)||0<=o&&(0>eZ(p.from,t)||q.marker.inclusiveLeft&&r.inclusiveRight)){return !0}}}}}}function eO(o){for(var m;m=al(o,!0);){o=m.find(-1,!0).line}return o}function n(o,m){var q=e2(o,m),p=eO(q);return q==p?m:fS(p)}function aB(o,m){if(m>o.lastLine()){return m}var q=e2(o,m),p;if(!aK(o,q)){return m}for(;p=al(q,!1);){q=p.find(1,!0).line}return fS(q)+1}function aK(o,m){var r=cw&&m.markedSpans;if(r){for(var q,p=0;p<r.length;++p){if(q=r[p],q.marker.collapsed&&(null==q.from||!q.marker.widgetNode&&0==q.from&&q.marker.inclusiveLeft&&cR(o,m,q))){return !0}}}}function cR(o,m,r){if(null==r.to){return m=r.marker.find(1,!0),cR(o,m.line,ax(m.line.markedSpans,r.marker))}if(r.marker.inclusiveRight&&r.to==m.text.length){return !0}for(var q,p=0;p<m.markedSpans.length;++p){if(q=m.markedSpans[p],q.marker.collapsed&&!q.marker.widgetNode&&q.from==r.to&&(null==q.to||q.to!=r.from)&&(q.marker.inclusiveLeft||r.marker.inclusiveRight)&&cR(o,m,q)){return !0}}}function dT(o,m,p){d4(m)<(o.curOp&&o.curOp.scrollTop||o.doc.scrollTop)&&dB(o,null,p)}function bI(o){if(null!=o.height){return o.height}var m=o.doc.cm;if(!m){return 0}if(!dV(document.body,o.node)){var p="position: relative;";o.coverGutter&&(p+="margin-left: -"+m.display.gutters.offsetWidth+"px;");o.noHScroll&&(p+="width: "+m.display.wrapper.clientWidth+"px;");fz(m.display.measure,e3("div",[o.node],null,p))}return o.height=o.node.offsetHeight}function cJ(o,m,t,r){var q=new cu(o,t,r),p=o.cm;p&&q.noHScroll&&(p.display.alignWidgets=!0);dC(o,m,"widget",function(u){var v=u.widgets||(u.widgets=[]);q.insertAt==null?v.push(q):v.splice(Math.min(v.length-1,Math.max(0,q.insertAt)),0,q);q.line=u;if(p&&!aK(o,u)){v=d4(u)<o.scrollTop;fq(u,u.height+bI(q));v&&dB(p,null,q.height);p.curOp.forceUpdate=true}return true});return q}function dG(o,m){if(o){for(;;){var q=o.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!q){break}var o=o.slice(0,q.index)+o.slice(q.index+q[0].length),p=q[1]?"bgClass":"textClass";null==m[p]?m[p]=q[2]:RegExp("(?:^|s)"+q[2]+"(?:$|s)").test(m[p])||(m[p]+=" "+q[2])}}return o}function du(o,m){if(o.blankLine){return o.blankLine(m)}if(o.innerMode){var p=e6.innerMode(o,m);if(p.mode.blankLine){return p.mode.blankLine(p.state)}}}function cF(o,m,t,r){for(var q=0;10>q;q++){r&&(r[0]=e6.innerMode(o,t).mode);var p=o.token(m,t);if(m.pos>m.start){return p}}throw Error("Mode "+o.name+" failed to advance stream.")}function c9(z,y,x,w){function v(A){return{start:o.start,end:o.pos,string:o.current(),type:r||null,state:A?dX(u.mode,p):p}}var u=z.doc,t=u.mode,r,y=e1(u,y),q=e2(u,y.line),p=b6(z,y.line,x),o=new b5(q.text,z.options.tabSize),m;for(w&&(m=[]);(w||o.pos<y.ch)&&!o.eol();){o.start=o.pos,r=cF(t,o,p),w&&m.push(v(!0))}return w?m:v()}function cW(A,z,y,x,w,v,u){var t=y.flattenSpans;null==t&&(t=A.options.flattenSpans);var r=0,q=null,p=new b5(z,A.options.tabSize),m,o=A.options.addModeClass&&[null];for(""==z&&dG(du(y,x),v);!p.eol();){p.pos>A.options.maxHighlightLength?(t=!1,u&&di(A,z,x,p.pos),p.pos=z.length,m=null):m=dG(cF(y,p,x,o),v);if(o){var B=o[0].name;B&&(m="m-"+(m?B+" "+m:B))}if(!t||q!=m){for(;r<p.start;){r=Math.min(p.start,r+50000),w(r,q)}q=m}p.start=p.pos}for(;r<p.pos;){A=Math.min(p.pos,r+50000),w(A,q),r=A}}function fM(w,v,u,t){var r=[w.state.modeGen],q={};cW(w,v.text,w.doc.mode,u,function(y,x){r.push(y,x)},q,t);for(u=0;u<w.state.overlays.length;++u){var p=w.state.overlays[u],o=1,m=0;cW(w,v.text,p.mode,!0,function(y,x){for(var A=o;m<y;){var z=r[o];z>y&&r.splice(o,1,y,r[o+1],z);o=o+2;m=Math.min(y,z)}if(x){if(p.opaque){r.splice(A,o-A,y,"cm-overlay "+x);o=A+2}else{for(;A<o;A=A+2){z=r[A+1];r[A+1]=(z?z+" ":"")+"cm-overlay "+x}}}},q)}return{styles:r,classes:q.bgClass||q.textClass?q:null}}function cK(o,m,q){if(!m.styles||m.styles[0]!=o.state.modeGen){var p=fM(o,m,m.stateAfter=b6(o,fS(m)));m.styles=p.styles;p.classes?m.styleClasses=p.classes:m.styleClasses&&(m.styleClasses=null);q===o.doc.frontier&&o.doc.frontier++}return m.styles}function di(o,m,t,r){var q=o.doc.mode,p=new b5(m,o.options.tabSize);p.start=p.pos=r||0;for(""==m&&du(q,t);!p.eol()&&p.pos<=o.options.maxHighlightLength;){cF(q,p,t),p.start=p.pos}}function cy(o,m){if(!o||/^\s*$/.test(o)){return null}var p=m.addModeClass?cx:b8;return p[o]||(p[o]=o.replace(/\S+/g,"cm-$&"))}function eR(ac,ab){var aa=e3("span",null,null,fQ?"padding-right: .1px":null),aa={pre:e3("pre",[aa]),content:aa,col:0,pos:0,cm:ac,splitSpaces:(eV||fQ)&&ac.getOption("lineWrapping")};ab.measure={};for(var Z=0;Z<=(ab.rest?ab.rest.length:0);Z++){var Y=Z?ab.rest[Z-1]:ab.line,X;aa.pos=0;aa.addToken=bW;var W;if(null!=ct){W=ct}else{W=fz(ac.display.measure,document.createTextNode("AخA"));var V=br(W,0,1).getBoundingClientRect();W=!V||V.left==V.right?!1:ct=3>br(W,1,2).getBoundingClientRect().right-V.right}if(W&&(X=fv(Y))){aa.addToken=bK(aa.addToken,X)}aa.map=[];V=ab!=ac.display.externalMeasured&&fS(Y);ac:{W=aa;var V=cK(ac,Y,V),U=Y.markedSpans,T=Y.text,S=0;if(U){for(var P=T.length,R=0,J=1,Q="",O=void 0,K=void 0,N=0,G=void 0,F=void 0,E=void 0,y=void 0,C=void 0;;){if(N==R){for(var G=F=E=y=K="",C=null,N=Infinity,q=[],L=0;L<U.length;++L){var H=U[L],M=H.marker;if("bookmark"==M.type&&H.from==R&&M.widgetNode){q.push(M)}else{if(H.from<=R&&(null==H.to||H.to>R||M.collapsed&&H.to==R&&H.from==R)){if(null!=H.to&&(H.to!=R&&N>H.to)&&(N=H.to,F=""),M.className&&(G+=" "+M.className),M.css&&(K=M.css),M.startStyle&&H.from==R&&(E+=" "+M.startStyle),M.endStyle&&H.to==N&&(F+=" "+M.endStyle),M.title&&!y&&(y=M.title),M.collapsed&&(!C||0>d6(C.marker,M))){C=H}}else{H.from>R&&N>H.from&&(N=H.from)}}}if(C&&(C.from||0)==R){b9(W,(null==C.to?P+1:C.to)-R,C.marker,null==C.from);if(null==C.to){break ac}C.to==R&&(C=!1)}if(!C&&q.length){for(L=0;L<q.length;++L){b9(W,0,q[L])}}}if(R>=P){break}for(q=Math.min(P,N);;){if(Q){L=R+Q.length;C||(H=L>q?Q.slice(0,q-R):Q,W.addToken(W,H,O?O+G:G,E,R+H.length==N?F:"",y,K));if(L>=q){Q=Q.slice(q-R);R=q;break}R=L;E=""}Q=T.slice(S,S=V[J++]);O=cy(V[J++],W.cm.options)}}}else{for(var J=1;J<V.length;J+=2){W.addToken(W,T.slice(S,S=V[J]),cy(V[J+1],W.cm.options))}}}if(Y.styleClasses&&(Y.styleClasses.bgClass&&(aa.bgClass=b4(Y.styleClasses.bgClass,aa.bgClass||"")),Y.styleClasses.textClass)){aa.textClass=b4(Y.styleClasses.textClass,aa.textClass||"")}0==aa.map.length&&aa.map.push(0,0,aa.content.appendChild(by(ac.display.measure)));0==Z?(ab.measure.map=aa.map,ab.measure.cache={}):((ab.measure.maps||(ab.measure.maps=[])).push(aa.map),(ab.measure.caches||(ab.measure.caches=[])).push({}))}fQ&&/\bcm-tab\b/.test(aa.content.lastChild.className)&&(aa.content.className="cm-tab-wrap-hack");fO(ac,"renderLine",ac,ab.line,aa.pre);aa.pre.className&&(aa.textClass=b4(aa.pre.className,aa.textClass||""));return aa}function bW(C,B,A,z,y,x,w){if(B){var v=C.splitSpaces?B.replace(/ {3,}/g,a9):B,u=C.cm.state.specialChars,t=!1;if(u.test(B)){for(var r=document.createDocumentFragment(),o=0;;){u.lastIndex=o;var q=u.exec(B),E=q?q.index-o:B.length-o;if(E){var p=document.createTextNode(v.slice(o,o+E));eV&&9>eT?r.appendChild(e3("span",[p])):r.appendChild(p);C.map.push(C.pos,C.pos+E,p);C.col+=E;C.pos+=E}if(!q){break}o+=E+1;"\t"==q[0]?(p=C.cm.options.tabSize,q=p-C.col%p,p=r.appendChild(e3("span",k(q),"cm-tab")),p.setAttribute("role","presentation"),p.setAttribute("cm-text","\t"),C.col+=q):(p=C.cm.options.specialCharPlaceholder(q[0]),p.setAttribute("cm-text",q[0]),eV&&9>eT?r.appendChild(e3("span",[p])):r.appendChild(p),C.col+=1);C.map.push(C.pos,C.pos+1,p);C.pos++}}else{C.col+=B.length;var r=document.createTextNode(v);C.map.push(C.pos,C.pos+B.length,r);eV&&9>eT&&(t=!0);C.pos+=B.length}if(A||z||y||t||w){return B=A||"",z&&(B+=z),y&&(B+=y),z=e3("span",[r],B,w),x&&(z.title=x),C.content.appendChild(z)}C.content.appendChild(r)}}function a9(o){for(var m=" ",p=0;p<o.length-2;++p){m+=p%2?" ":" "}return m+" "}function bK(o,m){return function(A,z,y,x,w,v,u){for(var y=y?y+" cm-force-border":"cm-force-border",t=A.pos,r=t+z.length;;){for(var p=0;p<m.length;p++){var q=m[p];if(q.to>t&&q.from<=t){break}}if(q.to>=r){return o(A,z,y,x,w,v,u)}o(A,z.slice(0,q.to-t),y,x,null,v,u);x=null;z=z.slice(q.to-t);t=q.to}}}function b9(o,m,r,q){var p=!q&&r.widgetNode;p&&o.map.push(o.pos,o.pos+m,p);!q&&o.cm.display.input.needsContentAttribute&&(p||(p=o.content.appendChild(document.createElement("span"))),p.setAttribute("cm-marker",r.id));p&&(o.cm.display.input.setUneditable(p),o.content.appendChild(p));o.pos+=m}function an(o,m){return 0==m.from.ch&&0==m.to.ch&&""==eX(m.text)&&(!o.cm||o.cm.options.wholeLineUpdateBefore)}function dO(F,E,C,B){function A(m){return C?C[m]:null}function z(m,J,H){var o=B;m.text=J;m.stateAfter&&(m.stateAfter=null);m.styles&&(m.styles=null);null!=m.order&&(m.order=null);eD(m);eq(m,H);J=o?o(m):1;J!=m.height&&fq(m,J);fJ(m,"change",m,E)}function y(o,m){for(var J=o,H=[];J<m;++J){H.push(new ak(v[J],A(J),B))}return H}var x=E.from,w=E.to,v=E.text,u=e2(F,x.line),q=e2(F,w.line),t=eX(v),G=A(v.length-1),r=w.line-x.line;if(E.full){F.insert(0,y(0,v.length)),F.remove(v.length,F.size-v.length)}else{if(an(F,E)){var p=y(0,v.length-1);z(q,q.text,G);r&&F.remove(x.line,r);p.length&&F.insert(x.line,p)}else{u==q?1==v.length?z(u,u.text.slice(0,x.ch)+t+u.text.slice(w.ch),G):(p=y(1,v.length-1),p.push(new ak(t+u.text.slice(w.ch),G,B)),z(u,u.text.slice(0,x.ch)+v[0],A(0)),F.insert(x.line+1,p)):1==v.length?(z(u,u.text.slice(0,x.ch)+v[0]+q.text.slice(w.ch),A(0)),F.remove(x.line+1,r)):(z(u,u.text.slice(0,x.ch)+v[0],A(0)),z(q,t+q.text.slice(w.ch),G),p=y(1,v.length-1),1<r&&F.remove(x.line+1,r-1),F.insert(x.line+1,p))}}fJ(F,"change",F,E)}function h(o){this.lines=o;this.parent=null;for(var m=0,p=0;m<o.length;++m){o[m].parent=this,p+=o[m].height}this.height=p}function gx(o){this.children=o;for(var m=0,r=0,q=0;q<o.length;++q){var p=o[q],m=m+p.chunkSize(),r=r+p.height;p.parent=this}this.size=m;this.height=r;this.parent=null}function aQ(o,m,q){function p(r,x,w){if(r.linked){for(var v=0;v<r.linked.length;++v){var u=r.linked[v];if(u.doc!=x){var t=w&&u.sharedHist;if(!q||t){m(u.doc,t),p(u.doc,r,t)}}}}}p(o,null,!0)}function ai(o,m){if(m.cm){throw Error("This document is already in use.")}o.doc=m;m.cm=o;aw(o);aI(o);o.options.lineWrapping||gw(o);o.options.mode=m.modeOption;fD(o)}function e2(o,m){m-=o.first;if(0>m||m>=o.size){throw Error("There is no line "+(m+o.first)+" in the document.")}for(var t=o;!t.lines;){for(var r=0;;++r){var q=t.children[r],p=q.chunkSize();if(m<p){t=q;break}m-=p}}return t.lines[m]}function f7(o,m,r){var q=[],p=m.line;o.iter(m.line,r.line+1,function(t){t=t.text;p==r.line&&(t=t.slice(0,r.ch));p==m.line&&(t=t.slice(m.ch));q.push(t);++p});return q}function bS(o,m,q){var p=[];o.iter(m,q,function(r){p.push(r.text)});return p}function fq(o,m){var q=m-o.height;if(q){for(var p=o;p;p=p.parent){p.height+=q}}}function fS(o){if(null==o.parent){return null}for(var m=o.parent,o=fL(m.lines,o),q=m.parent;q;m=q,q=q.parent){for(var p=0;q.children[p]!=m;++p){o+=q.children[p].chunkSize()}}return o+m.first}function i(o,m){var t=o.first;o:do{for(var r=0;r<o.children.length;++r){var q=o.children[r],p=q.height;if(m<p){o=q;continue o}m-=p;t+=q.chunkSize()}return t}while(!o.lines);for(r=0;r<o.lines.length;++r){q=o.lines[r].height;if(m<q){break}m-=q}return t+r}function d4(o){for(var o=eO(o),m=0,r=o.parent,q=0;q<r.lines.length;++q){var p=r.lines[q];if(p==o){break}else{m+=p.height}}for(o=r.parent;o;r=o,o=r.parent){for(q=0;q<o.children.length&&!(p=o.children[q],p==r);++q){m+=p.height}}return m}function fv(o){var m=o.order;null==m&&(m=o.order=cl(o.text));return m}function bT(m){this.done=[];this.undone=[];this.undoDepth=Infinity;this.lastModTime=this.lastSelTime=0;this.lastOrigin=this.lastSelOrigin=this.lastOp=this.lastSelOp=null;this.generation=this.maxGeneration=m||1}function d1(o,m){var p={from:e5(m.from.line,m.from.ch),to:bV(m),text:f7(o,m.from,m.to)};bX(o,p,m.from.line,m.to.line+1);aQ(o,function(q){bX(q,p,m.from.line,m.to.line+1)},!0);return p}function ch(m){for(;m.length;){if(eX(m).ranges){m.pop()}else{break}}}function bn(x,w,v,u){var t=x.history;t.undone.length=0;var r=+new Date,q,p;if(p=t.lastOp==u||t.lastOrigin==w.origin&&w.origin&&("+"==w.origin.charAt(0)&&x.cm&&t.lastModTime>r-x.cm.options.historyEventDelay||"*"==w.origin.charAt(0))){var o;t.lastOp==u?(ch(t.done),o=eX(t.done)):t.done.length&&!eX(t.done).ranges?o=eX(t.done):1<t.done.length&&!t.done[t.done.length-2].ranges&&(t.done.pop(),o=eX(t.done));p=q=o}if(p){var m=eX(q.changes);0==eZ(w.from,w.to)&&0==eZ(w.from,m.to)?m.to=bV(w):q.changes.push(d1(x,w))}else{q=eX(t.done);(!q||!q.ranges)&&cZ(x.sel,t.done);q={changes:[d1(x,w)],generation:t.generation};for(t.done.push(q);t.done.length>t.undoDepth;){t.done.shift(),t.done[0].ranges||t.done.shift()}}t.done.push(v);t.generation=++t.maxGeneration;t.lastModTime=t.lastSelTime=r;t.lastOp=t.lastSelOp=u;t.lastOrigin=t.lastSelOrigin=w.origin;m||fO(x,"historyAdded")}function cZ(o,m){var p=eX(m);(!p||!p.ranges||!p.equals(o))&&m.push(o)}function bX(o,m,t,r){var q=m["spans_"+o.id],p=0;o.iter(Math.max(o.first,t),Math.min(o.first+o.size,r),function(u){u.markedSpans&&((q||(q=m["spans_"+o.id]={}))[p]=u.markedSpans);++p})}function cV(o){if(!o){return null}for(var m=0,p;m<o.length;++m){o[m].marker.explicitlyCleared?p||(p=o.slice(0,m)):p&&p.push(o[m])}return !p?o:p.length?p:null}function cO(y,x,w){for(var v=0,u=[];v<y.length;++v){var t=y[v];if(t.ranges){u.push(w?dR.prototype.deepCopy.call(t):t)}else{var t=t.changes,r=[];u.push({changes:r});for(var q=0;q<t.length;++q){var p=t[q],o;r.push({from:p.from,to:p.to,text:p.text});if(x){for(var m in p){if((o=m.match(/^spans_(\d+)$/))&&-1<fL(x,Number(o[1]))){eX(r)[m]=p[m],delete p[m]}}}}}}return u}function bL(o,m,q,p){q<o.line?o.line+=p:m<o.line&&(o.line=m,o.ch=0)}function bz(w,v,u,t){for(var r=0;r<w.length;++r){var q=w[r],p=!0;if(q.ranges){q.copied||(q=w[r]=q.deepCopy(),q.copied=!0);for(var o=0;o<q.ranges.length;o++){bL(q.ranges[o].anchor,v,u,t),bL(q.ranges[o].head,v,u,t)}}else{for(o=0;o<q.changes.length;++o){var m=q.changes[o];if(u<m.from.line){m.from=e5(m.from.line+t,m.from.ch),m.to=e5(m.to.line+t,m.to.ch)}else{if(v<=m.to.line){p=!1;break}}}p||(w.splice(0,r+1),r=0)}}}function aY(o,m){var r=m.from.line,q=m.to.line,p=m.text.length-(q-r)-1;bz(o.done,r,q,p);bz(o.undone,r,q,p)}function fh(m){return null!=m.defaultPrevented?m.defaultPrevented:!1==m.returnValue}function bR(o){var m=o.which;null==m&&(o.button&1?m=1:o.button&2?m=3:o.button&4&&(m=2));fx&&(o.ctrlKey&&1==m)&&(m=3);return m}function fJ(o,m){function u(v){return function(){v.apply(null,r)}}var t=o._handlers&&o._handlers[m];if(t){var r=Array.prototype.slice.call(arguments,2),q;dK?q=dK.delayedCallbacks:f6?q=f6:(q=f6=[],setTimeout(f8,0));for(var p=0;p<t.length;++p){q.push(u(t[p]))}}}function f8(){var o=f6;f6=null;for(var m=0;m<o.length;++m){o[m]()}}function eB(o,m,p){"string"==typeof m&&(m={type:m,preventDefault:function(){this.defaultPrevented=!0}});fO(o,p||m.type,o,m);return fh(m)||m.codemirrorIgnore}function bA(o){var m=o._handlers&&o._handlers.cursorActivity;if(m){for(var o=o.curOp.cursorActivityHandlers||(o.curOp.cursorActivityHandlers=[]),p=0;p<m.length;++p){-1==fL(o,m[p])&&o.push(m[p])}}}function fB(o,m){var p=o._handlers&&o._handlers[m];return p&&0<p.length}function cC(m){m.prototype.on=function(o,p){e4(this,o,p)};m.prototype.off=function(o,p){eo(this,o,p)}}function bD(){this.id=null}function bF(o,m,u){for(var t=0,r=0;;){var q=o.indexOf("\t",t);-1==q&&(q=o.length);var p=q-t;if(q==o.length||r+p>=m){return t+Math.min(p,m-r)}r+=q-t;r+=u-r%u;t=q+1;if(r>=m){return t}}}function k(m){for(;bH.length<=m;){bH.push(eX(bH)+" ")}return bH[m]}function eX(m){return m[m.length-1]}function fL(o,m){for(var p=0;p<o.length;++p){if(o[p]==m){return p}}return -1}function c6(o,m){for(var q=[],p=0;p<o.length;p++){q[p]=m(o[p],p)}return q}function bq(){}function bh(o,m){var p;Object.create?p=Object.create(o):(bq.prototype=o,p=new bq);m&&fy(m,p);return p}function fy(o,m,q){m||(m={});for(var p in o){if(o.hasOwnProperty(p)&&(!1!==q||!m.hasOwnProperty(p))){m[p]=o[p]}}return m}function bl(o){var m=Array.prototype.slice.call(arguments,1);return function(){return o.apply(null,m)}}function dq(o,m){return !m?cm(o):-1<m.source.indexOf("\\w")&&cm(o)?!0:m.test(o)}function f9(o){for(var m in o){if(o.hasOwnProperty(m)&&o[m]){return !1}}return !0}function bU(m){return 768<=m.charCodeAt(0)&&fI.test(m)}function e3(o,m,q,p){o=document.createElement(o);q&&(o.className=q);p&&(o.style.cssText=p);if("string"==typeof m){o.appendChild(document.createTextNode(m))}else{if(m){for(q=0;q<m.length;++q){o.appendChild(m[q])}}}return o}function ay(o){for(var m=o.childNodes.length;0<m;--m){o.removeChild(o.firstChild)}return o}function fz(o,m){return ay(o).appendChild(m)}function gm(){return document.activeElement}function a1(m){return RegExp("(^|\\s)"+m+"(?:$|\\s)\\s*")}function b4(o,m){for(var q=o.split(" "),p=0;p<q.length;p++){q[p]&&!a1(q[p]).test(m)&&(m+=" "+q[p])}return m}function fK(o){if(document.body.getElementsByClassName){for(var m=document.body.getElementsByClassName("CodeMirror"),q=0;q<m.length;q++){var p=m[q].CodeMirror;p&&o(p)}}}function cD(){var m;e4(window,"resize",function(){null==m&&(m=setTimeout(function(){m=null;fK(aX)},100))});e4(window,"blur",function(){fK(cq)})}function by(o){if(null==bG){var m=e3("span","​");fz(o,e3("span",[m,document.createTextNode("x")]));0!=o.firstChild.offsetHeight&&(bG=1>=m.offsetWidth&&2<m.offsetHeight&&!(eV&&8>eT))}o=bG?e3("span","​"):e3("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px");o.setAttribute("cm-text","");return o}function aR(o,m,u,t){if(!o){return t(m,u,"ltr")}for(var r=!1,q=0;q<o.length;++q){var p=o[q];if(p.from<u&&p.to>m||m==u&&p.to==m){t(Math.max(p.from,m),Math.min(p.to,u),1==p.level?"rtl":"ltr"),r=!0}}r||t(m,u,"ltr")}function bZ(m){return m.level%2?m.from:m.to}function bO(m){return(m=fv(m))?m[0].level%2?m[0].to:m[0].from:0}function bC(o){var m=fv(o);return !m?o.text.length:bZ(eX(m))}function e8(o,m){var q=e2(o.doc,m),p=eO(q);p!=q&&(m=fS(p));q=fv(p);p=!q?0:q[0].level%2?bC(p):bO(p);return e5(m,p)}function eJ(o,m){var r=e8(o,m.line),q=e2(o.doc,r.line),p=fv(q);return !p||0==p[0].level?(q=Math.max(0,q.text.search(/\S/)),e5(r.line,m.line==r.line&&m.ch<=q&&m.ch?0:q)):r}function dW(o,m){bw=null;for(var v=0,u;v<o.length;++v){var t=o[v];if(t.from<m&&t.to>m){return v}if(t.from==m||t.to==m){if(null==u){u=v}else{var r;r=t.level;var q=o[u].level,p=o[0].level;r=r==p?!0:q==p?!1:r<q;if(r){return t.from!=t.to&&(bw=u),v}t.from!=t.to&&(bw=v);break}}}return u}function bu(o,m,q,p){if(!p){return m+q}do{m+=q}while(0<m&&bU(o.text.charAt(m)));return m}function bB(o,m,u,t){var r=fv(o);if(!r){return gA(o,m,u,t)}for(var q=dW(r,m),p=r[q],m=bu(o,m,p.level%2?-u:u,t);;){if(m>p.from&&m<p.to){return m}if(m==p.from||m==p.to){if(dW(r,m)==q){return m}p=r[q+u];return 0<u==p.level%2?p.to:p.from}p=r[q+=u];if(!p){return null}m=0<u==p.level%2?bu(o,p.to,-1,t):bu(o,p.from,1,t)}}function gA(o,m,q,p){m+=q;if(p){for(;0<m&&bU(o.text.charAt(m));){m+=q}}return 0>m||m>o.text.length?null:m}var a8=/gecko\/\d/i.test(navigator.userAgent),ew=/MSIE \d/.test(navigator.userAgent),ej=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),eV=ew||ej,eT=eV&&(ew?document.documentMode||6:ej[1]),fQ=/WebKit\//.test(navigator.userAgent),e7=fQ&&/Qt\/\d+\.\d+/.test(navigator.userAgent),eI=/Chrome\//.test(navigator.userAgent),fs=/Opera\//.test(navigator.userAgent),cQ=/Apple Computer/.test(navigator.vendor),ev=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent),f2=/PhantomJS/.test(navigator.userAgent),eu=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),bP=eu||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent),fx=eu||/Mac/.test(navigator.platform),ei=/win/i.test(navigator.platform),ar=fs&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);ar&&(ar=Number(ar[1]));ar&&15<=ar&&(fs=!1,fQ=!0);var dZ=fx&&(e7||fs&&(null==ar||12.11>ar)),co=a8||eV&&9<=eT,gu=!1,cw=!1;f5.prototype=fy({update:function(o){var m=o.scrollWidth>o.clientWidth+1,q=o.scrollHeight>o.clientHeight+1,p=o.nativeBarWidth;if(q){this.vert.style.display="block";this.vert.style.bottom=m?p+"px":"0";this.vert.firstChild.style.height=Math.max(0,o.scrollHeight-o.clientHeight+(o.viewHeight-(m?p:0)))+"px"}else{this.vert.style.display="";this.vert.firstChild.style.height="0"}if(m){this.horiz.style.display="block";this.horiz.style.right=q?p+"px":"0";this.horiz.style.left=o.barLeft+"px";this.horiz.firstChild.style.width=o.scrollWidth-o.clientWidth+(o.viewWidth-o.barLeft-(q?p:0))+"px"}else{this.horiz.style.display="";this.horiz.firstChild.style.width="0"}if(!this.checkedOverlay&&o.clientHeight>0){p==0&&this.overlayHack();this.checkedOverlay=true}return{right:q?p:0,bottom:m?p:0}},setScrollLeft:function(m){if(this.horiz.scrollLeft!=m){this.horiz.scrollLeft=m}},setScrollTop:function(m){if(this.vert.scrollTop!=m){this.vert.scrollTop=m}},overlayHack:function(){this.horiz.style.minHeight=this.vert.style.minWidth=fx&&!ev?"12px":"18px";var o=this,m=function(p){(p.target||p.srcElement)!=o.vert&&(p.target||p.srcElement)!=o.horiz&&fU(o.cm,dN)(p)};e4(this.vert,"mousedown",m);e4(this.horiz,"mousedown",m)},clear:function(){var m=this.horiz.parentNode;m.removeChild(this.horiz);m.removeChild(this.vert)}},f5.prototype);bp.prototype=fy({update:function(){return{bottom:0,right:0}},setScrollLeft:function(){},setScrollTop:function(){},clear:function(){}},bp.prototype);e6.scrollbarModel={"native":f5,"null":bp};f0.prototype.signal=function(o,m){fB(o,m)&&this.events.push(arguments)};f0.prototype.finish=function(){for(var m=0;m<this.events.length;m++){fO.apply(null,this.events[m])}};var e5=e6.Pos=function(o,m){if(!(this instanceof e5)){return new e5(o,m)}this.line=o;this.ch=m},eZ=e6.cmpPos=function(o,m){return o.line-m.line||o.ch-m.ch},fw=null;eF.prototype=fy({init:function(o){function m(v){if(r.somethingSelected()){fw=r.getSelections();if(t.inaccurateSelection){t.prevInput="";t.inaccurateSelection=false;p.value=fw.join("\n");ck(p)}}else{if(r.options.lineWiseCopyCut){var u=d7(r);fw=u.text;if(v.type=="cut"){r.setSelections(u.ranges,null,fk)}else{t.prevInput="";p.value=u.text.join("\n");ck(p)}}else{return}}if(v.type=="cut"){r.state.cutIncoming=true}}var t=this,r=this.cm,q=this.wrapper=dH(),p=this.textarea=q.firstChild;o.wrapper.insertBefore(q,o.wrapper.firstChild);if(eu){p.style.width="0px"}e4(p,"input",function(){if(eV&&eT>=9&&t.hasSelection){t.hasSelection=null}t.poll()});e4(p,"paste",function(){if(fQ&&!r.state.fakedLastChar&&!(new Date-r.state.lastMiddleDown<200)){var v=p.selectionStart,u=p.selectionEnd;p.value=p.value+"$";p.selectionEnd=u;p.selectionStart=v;r.state.fakedLastChar=true}r.state.pasteIncoming=true;t.fastPoll()});e4(p,"cut",m);e4(p,"copy",m);e4(o.scroller,"paste",function(u){if(!c7(o,u)){r.state.pasteIncoming=true;t.focus()}});e4(o.lineSpace,"selectstart",function(u){c7(o,u)||fF(u)});e4(p,"compositionstart",function(){var u=r.getCursor("from");t.composing={start:u,range:r.markText(u,r.getCursor("to"),{className:"CodeMirror-composing"})}});e4(p,"compositionend",function(){if(t.composing){t.poll();t.composing.range.clear();t.composing=null}})},prepareSelection:function(){var o=this.cm,m=o.display,r=o.doc,q=cn(o);if(o.options.moveInputWithCursor){var o=dE(o,r.sel.primary().head,"div"),r=m.wrapper.getBoundingClientRect(),p=m.lineDiv.getBoundingClientRect();q.teTop=Math.max(0,Math.min(m.wrapper.clientHeight-10,o.top+p.top-r.top));q.teLeft=Math.max(0,Math.min(m.wrapper.clientWidth-10,o.left+p.left-r.left))}return q},showSelection:function(o){var m=this.cm.display;fz(m.cursorDiv,o.cursors);fz(m.selectionDiv,o.selection);if(o.teTop!=null){this.wrapper.style.top=o.teTop+"px";this.wrapper.style.left=o.teLeft+"px"}},reset:function(o){if(!this.contextMenuPending){var m,r,q=this.cm,p=q.doc;if(q.somethingSelected()){this.prevInput="";m=p.sel.primary();r=(m=aG&&(m.to().line-m.from().line>100||(r=q.getSelection()).length>1000))?"-":r||q.getSelection();this.textarea.value=r;q.state.focused&&ck(this.textarea);if(eV&&eT>=9){this.hasSelection=r}}else{if(!o){this.prevInput=this.textarea.value="";if(eV&&eT>=9){this.hasSelection=null}}}this.inaccurateSelection=m}},getField:function(){return this.textarea},supportsTouch:function(){return false},focus:function(){if(this.cm.options.readOnly!="nocursor"&&(!bP||gm()!=this.textarea)){try{this.textarea.focus()}catch(m){}}},blur:function(){this.textarea.blur()},resetPosition:function(){this.wrapper.style.top=this.wrapper.style.left=0},receivedFocus:function(){this.slowPoll()},slowPoll:function(){var m=this;m.pollingFast||m.polling.set(this.cm.options.pollInterval,function(){m.poll();m.cm.state.focused&&m.slowPoll()})},fastPoll:function(){function o(){if(!p.poll()&&!m){m=true;p.polling.set(60,o)}else{p.pollingFast=false;p.slowPoll()}}var m=false,p=this;p.pollingFast=true;p.polling.set(20,o)},poll:function(){var o=this.cm,m=this.textarea,u=this.prevInput;if(!o.state.focused||dY(m)&&!u||d9(o)||o.options.disableInput||o.state.keySeq){return false}if(o.state.pasteIncoming&&o.state.fakedLastChar){m.value=m.value.substring(0,m.value.length-1);o.state.fakedLastChar=false}var t=m.value;if(t==u&&!o.somethingSelected()){return false}if(eV&&eT>=9&&this.hasSelection===t||fx&&/[\uf700-\uf7ff]/.test(t)){o.display.input.reset();return false}if(o.doc.sel==o.display.selForContextMenu){var r=t.charCodeAt(0);r==8203&&!u&&(u="​");if(r==8666){this.reset();return this.cm.execCommand("undo")}}for(var q=0,r=Math.min(u.length,t.length);q<r&&u.charCodeAt(q)==t.charCodeAt(q);){++q}var p=this;fA(o,function(){eS(o,t.slice(q),u.length-q,null,p.composing?"*compose":null);t.length>1000||t.indexOf("\n")>-1?m.value=p.prevInput="":p.prevInput=t;if(p.composing){p.composing.range.clear();p.composing.range=o.markText(p.composing.start,o.getCursor("to"),{className:"CodeMirror-composing"})}});return true},ensurePolled:function(){if(this.pollingFast&&this.poll()){this.pollingFast=false}},onKeyPress:function(){if(eV&&eT>=9){this.hasSelection=null}this.fastPoll()},onContextMenu:function(z){function y(){if(t.selectionStart!=null){var B=v.somethingSelected(),A="​"+(B?t.value:"");t.value="⇚";t.value=A;w.prevInput=B?"":"​";t.selectionStart=1;t.selectionEnd=A.length;u.selForContextMenu=v.doc.sel}}function x(){w.contextMenuPending=false;w.wrapper.style.position="relative";t.style.cssText=p;if(eV&&eT<9){u.scrollbars.setScrollTop(u.scroller.scrollTop=q)}if(t.selectionStart!=null){(!eV||eV&&eT<9)&&y();var A=0,B=function(){u.selForContextMenu==v.doc.sel&&t.selectionStart==0&&t.selectionEnd>0&&w.prevInput=="​"?fU(v,ez.selectAll)(v):A++<10?u.detectingSelectAll=setTimeout(B,500):u.input.reset()};u.detectingSelectAll=setTimeout(B,200)}}var w=this,v=w.cm,u=v.display,t=w.textarea,r=dy(v,z),q=u.scroller.scrollTop;if(r&&!fs){v.options.resetSelectionOnContextMenu&&v.doc.sel.contains(r)==-1&&fU(v,fV)(v.doc,fT(r),fk);var p=t.style.cssText;w.wrapper.style.position="absolute";t.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(z.clientY-5)+"px; left: "+(z.clientX-5)+"px; z-index: 1000; background: "+(eV?"rgba(255, 255, 255, .05)":"transparent")+"; outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);";if(fQ){var o=window.scrollY}u.input.focus();fQ&&window.scrollTo(null,o);u.input.reset();if(!v.somethingSelected()){t.value=w.prevInput=" "}w.contextMenuPending=true;u.selForContextMenu=v.doc.sel;clearTimeout(u.detectingSelectAll);eV&&eT>=9&&y();if(co){gi(z);var m=function(){eo(window,"mouseup",m);setTimeout(x,20)};e4(window,"mouseup",m)}else{setTimeout(x,50)}}},setUneditable:bq,needsContentAttribute:!1},eF.prototype);es.prototype=fy({init:function(o){function m(t){if(p.somethingSelected()){fw=p.getSelections();t.type=="cut"&&p.replaceSelection("",null,"cut")}else{if(p.options.lineWiseCopyCut){var r=d7(p);fw=r.text;t.type=="cut"&&p.operation(function(){p.setSelections(r.ranges,0,fk);p.replaceSelection("",null,"cut")})}else{return}}if(t.clipboardData&&!eu){t.preventDefault();t.clipboardData.clearData();t.clipboardData.setData("text/plain",fw.join("\n"))}else{var v=dH(),t=v.firstChild;p.display.lineSpace.insertBefore(v,p.display.lineSpace.firstChild);t.value=fw.join("\n");var u=document.activeElement;ck(t);setTimeout(function(){p.display.lineSpace.removeChild(v);u.focus()},50)}}var q=this,p=q.cm,o=q.div=o.lineDiv;o.contentEditable="true";dU(o);e4(o,"paste",function(t){var r=t.clipboardData&&t.clipboardData.getData("text/plain");if(r){t.preventDefault();p.replaceSelection(r,null,"paste")}});e4(o,"compositionstart",function(t){t=t.data;q.composing={sel:p.doc.sel,data:t,startData:t};if(t){var r=p.doc.sel.primary(),u=p.getLine(r.head.line).indexOf(t,Math.max(0,r.head.ch-t.length));if(u>-1&&u<=r.head.ch){q.composing.sel=fT(e5(r.head.line,u),e5(r.head.line,u+t.length))}}});e4(o,"compositionupdate",function(r){q.composing.data=r.data});e4(o,"compositionend",function(t){var r=q.composing;if(r){if(t.data!=r.startData&&!/\u200b/.test(t.data)){r.data=t.data}setTimeout(function(){r.handled||q.applyComposition(r);if(q.composing==r){q.composing=null}},50)}});e4(o,"touchstart",function(){q.forceCompositionEnd()});e4(o,"input",function(){q.composing||q.pollContent()||fA(q.cm,function(){fD(p)})});e4(o,"copy",m);e4(o,"cut",m)},prepareSelection:function(){var m=cn(this.cm,false);m.focus=this.cm.state.focused;return m},showSelection:function(m){if(m&&this.cm.display.view.length){m.focus&&this.showPrimarySelection();this.showMultipleSelections(m)}},showPrimarySelection:function(){var o=window.getSelection(),m=this.cm.doc.sel.primary(),u=dJ(this.cm,o.anchorNode,o.anchorOffset),t=dJ(this.cm,o.focusNode,o.focusOffset);if(!u||u.bad||!t||t.bad||!(eZ(et(u,t),m.from())==0&&eZ(eG(u,t),m.to())==0)){u=dv(this.cm,m.from());t=dv(this.cm,m.to());if(u||t){var r=this.cm.display.view,m=o.rangeCount&&o.getRangeAt(0);if(u){if(!t){t=r[r.length-1].measure;t=t.maps?t.maps[t.maps.length-1]:t.map;t={node:t[t.length-1],offset:t[t.length-2]-t[t.length-3]}}}else{u={node:r[0].measure.map[2],offset:0}}try{var q=br(u.node,u.offset,t.offset,t.node)}catch(p){}if(q){o.removeAllRanges();o.addRange(q);m&&o.anchorNode==null?o.addRange(m):a8&&this.startGracePeriod()}this.rememberSelection()}}},startGracePeriod:function(){var m=this;clearTimeout(this.gracePeriod);this.gracePeriod=setTimeout(function(){m.gracePeriod=false;m.selectionChanged()&&m.cm.operation(function(){m.cm.curOp.selectionChanged=true})},20)},showMultipleSelections:function(m){fz(this.cm.display.cursorDiv,m.cursors);fz(this.cm.display.selectionDiv,m.selection)},rememberSelection:function(){var m=window.getSelection();this.lastAnchorNode=m.anchorNode;this.lastAnchorOffset=m.anchorOffset;this.lastFocusNode=m.focusNode;this.lastFocusOffset=m.focusOffset},selectionInEditor:function(){var m=window.getSelection();if(!m.rangeCount){return false}m=m.getRangeAt(0).commonAncestorContainer;return dV(this.div,m)},focus:function(){this.cm.options.readOnly!="nocursor"&&this.div.focus()},blur:function(){this.div.blur()},getField:function(){return this.div},supportsTouch:function(){return true},receivedFocus:function(){function o(){if(m.cm.state.focused){m.pollSelection();m.polling.set(m.cm.options.pollInterval,o)}}var m=this;this.selectionInEditor()?this.pollSelection():fA(this.cm,function(){m.cm.curOp.selectionChanged=true});this.polling.set(this.cm.options.pollInterval,o)},selectionChanged:function(){var m=window.getSelection();return m.anchorNode!=this.lastAnchorNode||m.anchorOffset!=this.lastAnchorOffset||m.focusNode!=this.lastFocusNode||m.focusOffset!=this.lastFocusOffset},pollSelection:function(){if(!this.composing&&!this.gracePeriod&&this.selectionChanged()){var o=window.getSelection(),m=this.cm;this.rememberSelection();var q=dJ(m,o.anchorNode,o.anchorOffset),p=dJ(m,o.focusNode,o.focusOffset);q&&p&&fA(m,function(){fV(m.doc,fT(q,p),fk);if(q.bad||p.bad){m.curOp.selectionChanged=true}})}},pollContent:function(){var x=this.cm,w=x.display,v=x.doc.sel.primary(),u=v.from(),v=v.to();if(u.line<w.viewFrom||v.line>w.viewTo-1){return false}var t;if(u.line==w.viewFrom||(t=gy(x,u.line))==0){u=fS(w.view[0].line);t=w.view[0].node}else{u=fS(w.view[t].line);t=w.view[t-1].node.nextSibling}var r=gy(x,v.line);if(r==w.view.length-1){v=w.viewTo-1;w=w.view[r].node}else{v=fS(w.view[r+1].line)-1;w=w.view[r+1].node.previousSibling}w=b7(bE(x,t,w,u,v));for(t=f7(x.doc,e5(u,0),e5(v,e2(x.doc,v).text.length));w.length>1&&t.length>1;){if(eX(w)==eX(t)){w.pop();t.pop();v--}else{if(w[0]==t[0]){w.shift();t.shift();u++}else{break}}}for(var q=0,r=0,p=w[0],o=t[0],m=Math.min(p.length,o.length);q<m&&p.charCodeAt(q)==o.charCodeAt(q);){++q}p=eX(w);o=eX(t);for(m=Math.min(p.length-(w.length==1?q:0),o.length-(t.length==1?q:0));r<m&&p.charCodeAt(p.length-r-1)==o.charCodeAt(o.length-r-1);){++r}w[w.length-1]=p.slice(0,p.length-r);w[0]=w[0].slice(q);u=e5(u,q);v=e5(v,t.length?eX(t).length-r:0);if(w.length>1||w[0]||eZ(u,v)){a7(x.doc,w,u,v,"+input");return true}},ensurePolled:function(){this.forceCompositionEnd()},reset:function(){this.forceCompositionEnd()},forceCompositionEnd:function(){if(this.composing&&!this.composing.handled){this.applyComposition(this.composing);this.composing.handled=true;this.div.blur();this.div.focus()}},applyComposition:function(m){m.data&&m.data!=m.startData&&fU(this.cm,eS)(this.cm,m.data,0,m.sel)},setUneditable:function(m){m.setAttribute("contenteditable","false")},onKeyPress:function(m){m.preventDefault();fU(this.cm,eS)(this.cm,String.fromCharCode(m.charCode==null?m.keyCode:m.charCode),0)},onContextMenu:bq,resetPosition:bq,needsContentAttribute:!0},es.prototype);e6.inputStyles={textarea:eF,contenteditable:es};dR.prototype={primary:function(){return this.ranges[this.primIndex]},equals:function(o){if(o==this){return true}if(o.primIndex!=this.primIndex||o.ranges.length!=this.ranges.length){return false}for(var m=0;m<this.ranges.length;m++){var q=this.ranges[m],p=o.ranges[m];if(eZ(q.anchor,p.anchor)!=0||eZ(q.head,p.head)!=0){return false}}return true},deepCopy:function(){for(var o=[],m=0;m<this.ranges.length;m++){o[m]=new eY(e5(this.ranges[m].anchor.line,this.ranges[m].anchor.ch),e5(this.ranges[m].head.line,this.ranges[m].head.ch))}return new dR(o,this.primIndex)},somethingSelected:function(){for(var m=0;m<this.ranges.length;m++){if(!this.ranges[m].empty()){return true}}return false},contains:function(o,m){m||(m=o);for(var q=0;q<this.ranges.length;q++){var p=this.ranges[q];if(eZ(m,p.from())>=0&&eZ(o,p.to())<=0){return q}}return -1}};eY.prototype={from:function(){return et(this.anchor,this.head)},to:function(){return eG(this.anchor,this.head)},empty:function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch}};var cM={left:0,right:0,top:0,bottom:0},a2,dK=null,gt=0,fP,gj,c3=0,fi=0,fC=null;eV?fC=-0.53:a8?fC=15:eI?fC=-0.7:cQ&&(fC=-1/3);var bt=function(o){var m=o.wheelDeltaX,p=o.wheelDeltaY;if(m==null&&o.detail&&o.axis==o.HORIZONTAL_AXIS){m=o.detail}if(p==null&&o.detail&&o.axis==o.VERTICAL_AXIS){p=o.detail}else{if(p==null){p=o.wheelDelta}}return{x:m,y:p}};e6.wheelEventPixels=function(m){m=bt(m);m.x=m.x*fC;m.y=m.y*fC;return m};var fl=new bD,eL=null,bV=e6.changeEnd=function(m){return !m.text?m.to:e5(m.from.line+m.text.length-1,eX(m.text).length+(m.text.length==1?m.from.ch:0))};e6.prototype={constructor:e6,focus:function(){window.focus();this.display.input.focus()},setOption:function(o,m){var q=this.options,p=q[o];if(!(q[o]==m&&o!="mode")){q[o]=m;c.hasOwnProperty(o)&&fU(this,c[o])(this,m,p)}},getOption:function(m){return this.options[m]},getDoc:function(){return this.doc},addKeyMap:function(o,m){this.state.keyMaps[m?"push":"unshift"](c5(o))},removeKeyMap:function(o){for(var m=this.state.keyMaps,p=0;p<m.length;++p){if(m[p]==o||m[p].name==o){m.splice(p,1);return true}}},addOverlay:fH(function(o,m){var p=o.token?o:e6.getMode(this.options,o);if(p.startState){throw Error("Overlays may not be stateful.")}this.state.overlays.push({mode:p,modeSpec:o,opaque:m&&m.opaque});this.state.modeGen++;fD(this)}),removeOverlay:fH(function(o){for(var m=this.state.overlays,q=0;q<m.length;++q){var p=m[q].modeSpec;if(p==o||typeof o=="string"&&p.name==o){m.splice(q,1);this.state.modeGen++;fD(this);break}}}),indentLine:fH(function(o,m,p){typeof m!="string"&&typeof m!="number"&&(m=m==null?this.options.smartIndent?"smart":"prev":m?"add":"subtract");cH(this.doc,o)&&cT(this,o,m,p)}),indentSelection:fH(function(o){for(var m=this.doc.sel.ranges,u=-1,t=0;t<m.length;t++){var r=m[t];if(r.empty()){if(r.head.line>u){cT(this,r.head.line,o,true);u=r.head.line;t==this.doc.sel.primIndex&&eH(this)}}else{for(var q=r.from(),r=r.to(),p=Math.max(u,q.line),u=Math.min(this.lastLine(),r.line-(r.ch?0:1))+1,r=p;r<u;++r){cT(this,r,o)}r=this.doc.sel.ranges;q.ch==0&&(m.length==r.length&&r[t].from().ch>0)&&dI(this.doc,t,new eY(q,r[t].to()),fk)}}}),getTokenAt:function(o,m){return c9(this,o,m)},getLineTokens:function(o,m){return c9(this,e5(o),m,true)},getTokenTypeAt:function(o){var o=e1(this.doc,o),m=cK(this,e2(this.doc,o.line)),t=0,r=(m.length-1)/2,o=o.ch,q;if(o==0){q=m[2]}else{for(;;){var p=t+r>>1;if((p?m[p*2-1]:0)>=o){r=p}else{if(m[p*2+1]<o){t=p+1}else{q=m[p*2+2];break}}}}m=q?q.indexOf("cm-overlay "):-1;return m<0?q:m==0?null:q.slice(0,m-1)},getModeAt:function(o){var m=this.doc.mode;return !m.innerMode?m:e6.innerMode(m,this.getTokenAt(o).state).mode},getHelper:function(o,m){return this.getHelpers(o,m)[0]},getHelpers:function(o,m){var u=[];if(!b1.hasOwnProperty(m)){return u}var t=b1[m],r=this.getModeAt(o);if(typeof r[m]=="string"){t[r[m]]&&u.push(t[r[m]])}else{if(r[m]){for(var q=0;q<r[m].length;q++){var p=t[r[m][q]];p&&u.push(p)}}else{r.helperType&&t[r.helperType]?u.push(t[r.helperType]):t[r.name]&&u.push(t[r.name])}}for(q=0;q<t._global.length;q++){p=t._global[q];p.pred(r,this)&&fL(u,p.val)==-1&&u.push(p.val)}return u},getStateAfter:function(o,m){var p=this.doc,o=Math.max(p.first,Math.min(o==null?p.first+p.size-1:o,p.first+p.size-1));return b6(this,o+1,m)},cursorCoords:function(o,m){var p;p=this.doc.sel.primary();p=o==null?p.head:typeof o=="object"?e1(this.doc,o):o?p.from():p.to();return dE(this,p,m||"page")},charCoords:function(o,m){return cB(this,e1(this.doc,o),m||"page")},coordsChar:function(o,m){o=ek(this,o,m||"page");return bN(this,o.left,o.top)},lineAtHeight:function(o,m){o=ek(this,{top:o,left:0},m||"page").top;return i(this.doc,o+this.display.viewOffset)},heightAtLine:function(o,m){var q=false,p;if(typeof o=="number"){p=this.doc.first+this.doc.size-1;if(o<this.doc.first){o=this.doc.first}else{if(o>p){o=p;q=true}}p=e2(this.doc,o)}else{p=o}return ci(this,p,{top:0,left:0},m||"page").top+(q?this.doc.height-d4(p):0)},defaultTextHeight:function(){return aW(this.display)},defaultCharWidth:function(){return fj(this.display)},setGutterMarker:fH(function(o,m,p){return dC(this.doc,o,"gutter",function(q){var r=q.gutterMarkers||(q.gutterMarkers={});r[m]=p;if(!p&&f9(r)){q.gutterMarkers=null}return true})}),clearGutter:fH(function(o){var m=this,q=m.doc,p=q.first;q.iter(function(r){if(r.gutterMarkers&&r.gutterMarkers[o]){r.gutterMarkers[o]=null;ds(m,p,"gutter");if(f9(r.gutterMarkers)){r.gutterMarkers=null}}++p})}),lineInfo:function(o){if(typeof o=="number"){if(!cH(this.doc,o)){return null}var m=o,o=e2(this.doc,o);if(!o){return null}}else{m=fS(o);if(m==null){return null}}return{line:m,handle:o,text:o.text,gutterMarkers:o.gutterMarkers,textClass:o.textClass,bgClass:o.bgClass,wrapClass:o.wrapClass,widgets:o.widgets}},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(x,w,v,u,t){var r=this.display,x=dE(this,e1(this.doc,x)),q=x.bottom,p=x.left;w.style.position="absolute";w.setAttribute("cm-ignore-events","true");this.display.input.setUneditable(w);r.sizer.appendChild(w);if(u=="over"){q=x.top}else{if(u=="above"||u=="near"){var o=Math.max(r.wrapper.clientHeight,this.doc.height),m=Math.max(r.sizer.clientWidth,r.lineSpace.clientWidth);if((u=="above"||x.bottom+w.offsetHeight>o)&&x.top>w.offsetHeight){q=x.top-w.offsetHeight}else{if(x.bottom+w.offsetHeight<=o){q=x.bottom}}p+w.offsetWidth>m&&(p=m-w.offsetWidth)}}w.style.top=q+"px";w.style.left=w.style.right="";if(t=="right"){p=r.sizer.clientWidth-w.offsetWidth;w.style.right="0px"}else{t=="left"?p=0:t=="middle"&&(p=(r.sizer.clientWidth-w.offsetWidth)/2);w.style.left=p+"px"}if(v){x=bk(this,p,q,p+w.offsetWidth,q+w.offsetHeight);x.scrollTop!=null&&dQ(this,x.scrollTop);x.scrollLeft!=null&&f1(this,x.scrollLeft)}},triggerOnKeyDown:fH(cs),triggerOnKeyPress:fH(b3),triggerOnKeyUp:cE,execCommand:function(m){if(ez.hasOwnProperty(m)){return ez[m](this)}},findPosH:function(o,m,t,r){var q=1;if(m<0){q=-1;m=-m}for(var p=0,o=e1(this.doc,o);p<m;++p){o=dp(this.doc,o,q,t,r);if(o.hitSide){break}}return o},moveH:fH(function(o,m){var p=this;p.extendSelectionsBy(function(q){return p.display.shift||p.doc.extend||q.empty()?dp(p.doc,q.head,o,m,p.options.rtlMoveVisually):o<0?q.from():q.to()},aP)}),deleteH:fH(function(o,m){var p=this.doc;this.doc.sel.somethingSelected()?p.replaceSelection("",null,"+delete"):dk(this,function(r){var q=dp(p,r.head,o,m,false);return o<0?{from:q,to:r.head}:{from:r.head,to:q}})}),findPosV:function(o,m,t,r){var q=1;if(m<0){q=-1;m=-m}for(var p=0,o=e1(this.doc,o);p<m;++p){o=dE(this,o,"div");r==null?r=o.left:o.left=r;o=go(this,o,q,t);if(o.hitSide){break}}return o},moveV:fH(function(o,m){var u=this,t=this.doc,r=[],q=!u.display.shift&&!t.extend&&t.sel.somethingSelected();t.extendSelectionsBy(function(x){if(q){return o<0?x.from():x.to()}var w=dE(u,x.head,"div");if(x.goalColumn!=null){w.left=x.goalColumn}r.push(w.left);var v=go(u,w,o,m);m=="page"&&x==t.sel.primary()&&dB(u,null,cB(u,v,"div").top-w.top);return v},aP);if(r.length){for(var p=0;p<t.sel.ranges.length;p++){t.sel.ranges[p].goalColumn=r[p]}}}),findWordAt:function(o){var m=e2(this.doc,o.line).text,t=o.ch,r=o.ch;if(m){var q=this.getHelper(o,"wordChars");(o.xRel<0||r==m.length)&&t?--t:++r;for(var p=m.charAt(t),p=dq(p,q)?function(u){return dq(u,q)}:/\s/.test(p)?function(u){return/\s/.test(u)}:function(u){return !/\s/.test(u)&&!dq(u)};t>0&&p(m.charAt(t-1));){--t}for(;r<m.length&&p(m.charAt(r));){++r}}return new eY(e5(o.line,t),e5(o.line,r))},toggleOverwrite:function(m){if(!(m!=null&&m==this.state.overwrite)){(this.state.overwrite=!this.state.overwrite)?dD(this.display.cursorDiv,"CodeMirror-overwrite"):d3(this.display.cursorDiv,"CodeMirror-overwrite");fO(this,"overwriteToggle",this,this.state.overwrite)}},hasFocus:function(){return this.display.input.getField()==gm()},scrollTo:fH(function(o,m){(o!=null||m!=null)&&dP(this);if(o!=null){this.curOp.scrollLeft=o}if(m!=null){this.curOp.scrollTop=m}}),getScrollInfo:function(){var m=this.display.scroller;return{left:m.scrollLeft,top:m.scrollTop,height:m.scrollHeight-gl(this)-this.display.barHeight,width:m.scrollWidth-gl(this)-this.display.barWidth,clientHeight:a(this),clientWidth:cU(this)}},scrollIntoView:fH(function(o,m){if(o==null){o={from:this.doc.sel.primary().head,to:null};if(m==null){m=this.options.cursorScrollMargin}}else{typeof o=="number"?o={from:e5(o,0),to:null}:o.from==null&&(o={from:o,to:null})}if(!o.to){o.to=o.from}o.margin=m||0;if(o.from.line!=null){dP(this);this.curOp.scrollToPos=o}else{var p=bk(this,Math.min(o.from.left,o.to.left),Math.min(o.from.top,o.to.top)-o.margin,Math.max(o.from.right,o.to.right),Math.max(o.from.bottom,o.to.bottom)+o.margin);this.scrollTo(p.scrollLeft,p.scrollTop)}}),setSize:fH(function(o,m){function r(t){return typeof t=="number"||/^\d+$/.test(""+t)?t+"px":t}var q=this;if(o!=null){q.display.wrapper.style.width=r(o)}if(m!=null){q.display.wrapper.style.height=r(m)}q.options.lineWrapping&&ex(this);var p=q.display.viewFrom;q.doc.iter(p,q.display.viewTo,function(u){if(u.widgets){for(var t=0;t<u.widgets.length;t++){if(u.widgets[t].noHScroll){ds(q,p,"widget");break}}}++p});q.curOp.forceUpdate=true;fO(q,"refresh",this)}),operation:function(m){return fA(this,m)},refresh:fH(function(){var m=this.display.cachedTextHeight;fD(this);this.curOp.forceUpdate=true;eN(this);this.scrollTo(this.doc.scrollLeft,this.doc.scrollTop);g(this);(m==null||Math.abs(m-aW(this.display))>0.5)&&aw(this);fO(this,"refresh",this)}),swapDoc:fH(function(o){var m=this.doc;m.cm=null;ai(this,o);eN(this);this.display.input.reset();this.scrollTo(o.scrollLeft,o.scrollTop);this.curOp.forceScroll=true;fJ(this,"swapDoc",this,m);return m}),getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}};cC(e6);var dm=e6.defaults={},c=e6.optionHandlers={},f=e6.Init={toString:function(){return"CodeMirror.Init"}};e0("value","",function(o,m){o.setValue(m)},!0);e0("mode",null,function(o,m){o.doc.modeOption=m;aI(o)},!0);e0("indentUnit",2,aI,!0);e0("indentWithTabs",!1);e0("smartIndent",!0);e0("tabSize",4,function(m){gk(m);eN(m);fD(m)},!0);e0("specialChars",/[\t\u0000-\u0019\u00ad\u200b-\u200f\u2028\u2029\ufeff]/g,function(o,m,p){o.state.specialChars=RegExp(m.source+(m.test("\t")?"":"|\t"),"g");p!=e6.Init&&o.refresh()});e0("specialCharPlaceholder",function(o){var m=e3("span","•","cm-invalidchar");m.title="\\u"+o.charCodeAt(0).toString(16);m.setAttribute("aria-label",m.title);return m},function(m){m.refresh()},!0);e0("electricChars",!0);e0("inputStyle",bP?"contenteditable":"textarea",function(){throw Error("inputStyle can not (yet) be changed in a running editor")},!0);e0("rtlMoveVisually",!ei);e0("wholeLineUpdateBefore",!0);e0("theme","default",function(m){aT(m);eA(m)},!0);e0("keyMap","default",function(o,m,p){m=c5(m);(p=p!=e6.Init&&c5(p))&&p.detach&&p.detach(o,m);m.attach&&m.attach(o,p||null)});e0("extraKeys",null);e0("lineWrapping",!1,function(m){if(m.options.lineWrapping){dD(m.display.wrapper,"CodeMirror-wrap");m.display.sizer.style.minWidth="";m.display.sizerWidth=null}else{d3(m.display.wrapper,"CodeMirror-wrap");gw(m)}aw(m);fD(m);eN(m);setTimeout(function(){fr(m)},100)},!0);e0("gutters",[],function(m){bv(m.options);eA(m)},!0);e0("fixedGutter",!0,function(o,m){o.display.gutters.style.left=m?aO(o.display)+"px":"0";o.refresh()},!0);e0("coverGutterNextToScrollbar",!1,function(m){fr(m)},!0);e0("scrollbarStyle","native",function(m){aH(m);fr(m);m.display.scrollbars.setScrollTop(m.doc.scrollTop);m.display.scrollbars.setScrollLeft(m.doc.scrollLeft)},!0);e0("lineNumbers",!1,function(m){bv(m.options);eA(m)},!0);e0("firstLineNumber",1,eA,!0);e0("lineNumberFormatter",function(m){return m},eA,!0);e0("showCursorWhenSelecting",!1,dr,!0);e0("resetSelectionOnContextMenu",!0);e0("lineWiseCopyCut",!0);e0("readOnly",!1,function(o,m){if(m=="nocursor"){cq(o);o.display.input.blur();o.display.disabled=true}else{o.display.disabled=false;m||o.display.input.reset()}});e0("disableInput",!1,function(o,m){m||o.display.input.reset()},!0);e0("dragDrop",!0,function(o,m,p){if(!m!=!(p&&p!=e6.Init)){p=o.display.dragFunctions;m=m?e4:eo;m(o.display.scroller,"dragstart",p.start);m(o.display.scroller,"dragenter",p.simple);m(o.display.scroller,"dragover",p.simple);m(o.display.scroller,"drop",p.drop)}});e0("cursorBlinkRate",530);e0("cursorScrollMargin",0);e0("cursorHeight",1,dr,!0);e0("singleCursorHeightPerLine",!0,dr,!0);e0("workTime",100);e0("workDelay",100);e0("flattenSpans",!0,gk,!0);e0("addModeClass",!1,gk,!0);e0("pollInterval",100);e0("undoDepth",200,function(o,m){o.doc.history.undoDepth=m});e0("historyEventDelay",1250);e0("viewportMargin",10,function(m){m.refresh()},!0);e0("maxHighlightLength",10000,gk,!0);e0("moveInputWithCursor",!0,function(o,m){m||o.display.input.resetPosition()});e0("tabindex",null,function(o,m){o.display.input.getField().tabIndex=m||""});e0("autofocus",null);var dM=e6.modes={},aD=e6.mimeModes={};e6.defineMode=function(o,m){if(!e6.defaults.mode&&o!="null"){e6.defaults.mode=o}if(arguments.length>2){m.dependencies=Array.prototype.slice.call(arguments,2)}dM[o]=m};e6.defineMIME=function(o,m){aD[o]=m};e6.resolveMode=function(o){if(typeof o=="string"&&aD.hasOwnProperty(o)){o=aD[o]}else{if(o&&typeof o.name=="string"&&aD.hasOwnProperty(o.name)){var m=aD[o.name];typeof m=="string"&&(m={name:m});o=bh(m,o);o.name=m.name}else{if(typeof o=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(o)){return e6.resolveMode("application/xml")}}}return typeof o=="string"?{name:o}:o||{name:"null"}};e6.getMode=function(o,m){var m=e6.resolveMode(m),r=dM[m.name];if(!r){return e6.getMode(o,"text/plain")}r=r(o,m);if(aq.hasOwnProperty(m.name)){var q=aq[m.name],p;for(p in q){if(q.hasOwnProperty(p)){r.hasOwnProperty(p)&&(r["_"+p]=r[p]);r[p]=q[p]}}}r.name=m.name;if(m.helperType){r.helperType=m.helperType}if(m.modeProps){for(p in m.modeProps){r[p]=m.modeProps[p]}}return r};e6.defineMode("null",function(){return{token:function(m){m.skipToEnd()}}});e6.defineMIME("text/plain","null");var aq=e6.modeExtensions={};e6.extendMode=function(o,m){var p=aq.hasOwnProperty(o)?aq[o]:aq[o]={};fy(m,p)};e6.defineExtension=function(o,m){e6.prototype[o]=m};e6.defineDocExtension=function(o,m){fE.prototype[o]=m};e6.defineOption=e0;var aU=[];e6.defineInitHook=function(m){aU.push(m)};var b1=e6.helpers={};e6.registerHelper=function(o,m,p){b1.hasOwnProperty(o)||(b1[o]=e6[o]={_global:[]});b1[o][m]=p};e6.registerGlobalHelper=function(o,m,q,p){e6.registerHelper(o,m,p);b1[o]._global.push({pred:q,val:p})};var dX=e6.copyState=function(o,m){if(m===true){return m}if(o.copyState){return o.copyState(m)}var r={},q;for(q in m){var p=m[q];p instanceof Array&&(p=p.concat([]));r[q]=p}return r},I=e6.startState=function(o,m,p){return o.startState?o.startState(m,p):true};e6.innerMode=function(o,m){for(;o.innerMode;){var p=o.innerMode(m);if(!p||p.mode==o){break}m=p.state;o=p.mode}return p||{mode:o,state:m}};var ez=e6.commands={selectAll:function(m){m.setSelection(e5(m.firstLine(),0),e5(m.lastLine()),fk)},singleSelection:function(m){m.setSelection(m.getCursor("anchor"),m.getCursor("head"),fk)},killLine:function(m){dk(m,function(o){if(o.empty()){var p=e2(m.doc,o.head.line).text.length;return o.head.ch==p&&o.head.line<m.lastLine()?{from:o.head,to:e5(o.head.line+1,0)}:{from:o.head,to:e5(o.head.line,p)}}return{from:o.from(),to:o.to()}})},deleteLine:function(m){dk(m,function(o){return{from:e5(o.from().line,0),to:e1(m.doc,e5(o.to().line+1,0))}})},delLineLeft:function(m){dk(m,function(o){return{from:e5(o.from().line,0),to:o.from()}})},delWrappedLineLeft:function(m){dk(m,function(o){var p=m.charCoords(o.head,"div").top+5;return{from:m.coordsChar({left:0,top:p},"div"),to:o.from()}})},delWrappedLineRight:function(m){dk(m,function(o){var p=m.charCoords(o.head,"div").top+5,p=m.coordsChar({left:m.display.lineDiv.offsetWidth+100,top:p},"div");return{from:o.from(),to:p}})},undo:function(m){m.undo()},redo:function(m){m.redo()},undoSelection:function(m){m.undoSelection()},redoSelection:function(m){m.redoSelection()},goDocStart:function(m){m.extendSelection(e5(m.firstLine(),0))},goDocEnd:function(m){m.extendSelection(e5(m.lastLine()))},goLineStart:function(m){m.extendSelectionsBy(function(o){return e8(m,o.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(m){m.extendSelectionsBy(function(o){return eJ(m,o.head)},{origin:"+move",bias:1})},goLineEnd:function(m){m.extendSelectionsBy(function(o){for(var o=o.head.line,q,p=e2(m.doc,o);q=al(p,false);){p=q.find(1,true).line;o=null}q=fv(p);q=!q?p.text.length:q[0].level%2?bO(p):bC(p);return e5(o==null?fS(p):o,q)},{origin:"+move",bias:-1})},goLineRight:function(m){m.extendSelectionsBy(function(o){o=m.charCoords(o.head,"div").top+5;return m.coordsChar({left:m.display.lineDiv.offsetWidth+100,top:o},"div")},aP)},goLineLeft:function(m){m.extendSelectionsBy(function(o){o=m.charCoords(o.head,"div").top+5;return m.coordsChar({left:0,top:o},"div")},aP)},goLineLeftSmart:function(m){m.extendSelectionsBy(function(o){var p=m.charCoords(o.head,"div").top+5,p=m.coordsChar({left:0,top:p},"div");return p.ch<m.getLine(p.line).search(/\S/)?eJ(m,o.head):p},aP)},goLineUp:function(m){m.moveV(-1,"line")},goLineDown:function(m){m.moveV(1,"line")},goPageUp:function(m){m.moveV(-1,"page")},goPageDown:function(m){m.moveV(1,"page")},goCharLeft:function(m){m.moveH(-1,"char")},goCharRight:function(m){m.moveH(1,"char")},goColumnLeft:function(m){m.moveH(-1,"column")},goColumnRight:function(m){m.moveH(1,"column")},goWordLeft:function(m){m.moveH(-1,"word")},goGroupRight:function(m){m.moveH(1,"group")},goGroupLeft:function(m){m.moveH(-1,"group")},goWordRight:function(m){m.moveH(1,"word")},delCharBefore:function(m){m.deleteH(-1,"char")},delCharAfter:function(m){m.deleteH(1,"char")},delWordBefore:function(m){m.deleteH(-1,"word")},delWordAfter:function(m){m.deleteH(1,"word")},delGroupBefore:function(m){m.deleteH(-1,"group")},delGroupAfter:function(m){m.deleteH(1,"group")},indentAuto:function(m){m.indentSelection("smart")},indentMore:function(m){m.indentSelection("add")},indentLess:function(m){m.indentSelection("subtract")},insertTab:function(m){m.replaceSelection("\t")},insertSoftTab:function(o){for(var m=[],t=o.listSelections(),r=o.options.tabSize,q=0;q<t.length;q++){var p=t[q].from(),p=ft(o.getLine(p.line),p.ch,r);m.push(Array(r-p%r+1).join(" "))}o.replaceSelections(m)},defaultTab:function(m){m.somethingSelected()?m.indentSelection("add"):m.execCommand("insertTab")},transposeChars:function(m){fA(m,function(){for(var o=m.listSelections(),u=[],t=0;t<o.length;t++){var r=o[t].head,q=e2(m.doc,r.line).text;if(q){r.ch==q.length&&(r=new e5(r.line,r.ch-1));if(r.ch>0){r=new e5(r.line,r.ch+1);m.replaceRange(q.charAt(r.ch-1)+q.charAt(r.ch-2),e5(r.line,r.ch-2),r,"+transpose")}else{if(r.line>m.doc.first){var p=e2(m.doc,r.line-1).text;p&&m.replaceRange(q.charAt(0)+"\n"+p.charAt(p.length-1),e5(r.line-1,p.length-1),e5(r.line,1),"+transpose")}}}u.push(new eY(r,r))}m.setSelections(u)})},newlineAndIndent:function(m){fA(m,function(){for(var o=m.listSelections().length,q=0;q<o;q++){var p=m.listSelections()[q];m.replaceRange("\n",p.anchor,p.head,"+input");m.indentLine(p.from().line+1,null,true);eH(m)}})},toggleOverwrite:function(m){m.toggleOverwrite()}},bJ=e6.keyMap={};bJ.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"};bJ.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"};bJ.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"};bJ.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]};bJ["default"]=fx?bJ.macDefault:bJ.pcDefault;e6.normalizeKeyMap=function(x){var w={},v;for(v in x){if(x.hasOwnProperty(v)){var u=x[v];if(!/^(name|fallthrough|(de|at)tach)$/.test(v)){if(u!="..."){for(var t=c6(v.split(" "),dF),r=0;r<t.length;r++){var q,p;if(r==t.length-1){p=v;q=u}else{p=t.slice(0,r+1).join(" ");q="..."}var o=w[p];if(o){if(o!=q){throw Error("Inconsistent bindings for "+p)}}else{w[p]=q}}}delete x[v]}}}for(var m in w){x[m]=w[m]}return x};var aV=e6.lookupKey=function(o,m,t,r){var m=c5(m),q=m.call?m.call(o,r):m[o];if(q===false){return"nothing"}if(q==="..."){return"multi"}if(q!=null&&t(q)){return"handled"}if(m.fallthrough){if(Object.prototype.toString.call(m.fallthrough)!="[object Array]"){return aV(o,m.fallthrough,t,r)}for(q=0;q<m.fallthrough.length;q++){var p=aV(o,m.fallthrough[q],t,r);if(p){return p}}}},fW=e6.isModifierKey=function(m){m=typeof m=="string"?m:bx[m.keyCode];return m=="Ctrl"||m=="Alt"||m=="Shift"||m=="Mod"},eP=e6.keyName=function(o,m){if(fs&&o.keyCode==34&&o["char"]){return false}var q=bx[o.keyCode],p=q;if(p==null||o.altGraphKey){return false}o.altKey&&q!="Alt"&&(p="Alt-"+p);if((dZ?o.metaKey:o.ctrlKey)&&q!="Ctrl"){p="Ctrl-"+p}if((dZ?o.ctrlKey:o.metaKey)&&q!="Cmd"){p="Cmd-"+p}!m&&(o.shiftKey&&q!="Shift")&&(p="Shift-"+p);return p};e6.fromTextArea=function(w,v){function u(){w.value=m.getValue()}v=v?fy(v):{};v.value=w.value;if(!v.tabindex&&w.tabIndex){v.tabindex=w.tabIndex}if(!v.placeholder&&w.placeholder){v.placeholder=w.placeholder}if(v.autofocus==null){var t=gm();v.autofocus=t==w||w.getAttribute("autofocus")!=null&&t==document.body}if(w.form){e4(w.form,"submit",u);if(!v.leaveSubmitMethodAlone){var r=w.form,q=r.submit;try{var p=r.submit=function(){u();r.submit=q;r.submit();r.submit=p}}catch(o){}}}v.finishInit=function(x){x.save=u;x.getTextArea=function(){return w};x.toTextArea=function(){x.toTextArea=isNaN;u();w.parentNode.removeChild(x.getWrapperElement());w.style.display="";if(w.form){eo(w.form,"submit",u);if(typeof w.form.submit=="function"){w.form.submit=q}}}};w.style.display="none";var m=e6(function(x){w.parentNode.insertBefore(x,w.nextSibling)},v);return m};var b5=e6.StringStream=function(o,m){this.pos=this.start=0;this.string=o;this.tabSize=m||8;this.lineStart=this.lastColumnPos=this.lastColumnValue=0};b5.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==this.lineStart},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){if(this.pos<this.string.length){return this.string.charAt(this.pos++)}},eat:function(o){var m=this.string.charAt(this.pos);if(typeof o=="string"?m==o:m&&(o.test?o.test(m):o(m))){++this.pos;return m}},eatWhile:function(o){for(var m=this.pos;this.eat(o);){}return this.pos>m},eatSpace:function(){for(var m=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));){++this.pos}return this.pos>m},skipToEnd:function(){this.pos=this.string.length},skipTo:function(m){m=this.string.indexOf(m,this.pos);if(m>-1){this.pos=m;return true}},backUp:function(m){this.pos=this.pos-m},column:function(){if(this.lastColumnPos<this.start){this.lastColumnValue=ft(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue);this.lastColumnPos=this.start}return this.lastColumnValue-(this.lineStart?ft(this.string,this.lineStart,this.tabSize):0)},indentation:function(){return ft(this.string,null,this.tabSize)-(this.lineStart?ft(this.string,this.lineStart,this.tabSize):0)},match:function(o,m,q){if(typeof o=="string"){var p=this.string.substr(this.pos,o.length);if((q?p.toLowerCase():p)==(q?o.toLowerCase():o)){if(m!==false){this.pos=this.pos+o.length}return true}}else{if((o=this.string.slice(this.pos).match(o))&&o.index>0){return null}if(o&&m!==false){this.pos=this.pos+o[0].length}return o}},current:function(){return this.string.slice(this.start,this.pos)},hideFirstChars:function(o,m){this.lineStart=this.lineStart+o;try{return m()}finally{this.lineStart=this.lineStart-o}}};var c4=0,aE=e6.TextMarker=function(o,m){this.lines=[];this.type=m;this.doc=o;this.id=++c4};cC(aE);aE.prototype.clear=function(){if(!this.explicitlyCleared){var z=this.doc.cm,y=z&&!z.curOp;y&&D(z);if(fB(this,"clear")){var x=this.find();x&&fJ(this,"clear",x.from,x.to)}for(var w=x=null,v=0;v<this.lines.length;++v){var u=this.lines[v],t=ax(u.markedSpans,this);if(z&&!this.collapsed){ds(z,fS(u),"text")}else{if(z){t.to!=null&&(w=fS(u));t.from!=null&&(x=fS(u))}}for(var r=u,q=u.markedSpans,p=t,o=void 0,m=0;m<q.length;++m){q[m]!=p&&(o||(o=[])).push(q[m])}r.markedSpans=o;t.from==null&&(this.collapsed&&!aK(this.doc,u)&&z)&&fq(u,aW(z.display))}if(z&&this.collapsed&&!z.options.lineWrapping){for(v=0;v<this.lines.length;++v){u=eO(this.lines[v]);t=b(u);if(t>z.display.maxLineLength){z.display.maxLine=u;z.display.maxLineLength=t;z.display.maxLineChanged=true}}}x!=null&&(z&&this.collapsed)&&fD(z,x,w+1);this.lines.length=0;this.explicitlyCleared=true;if(this.atomic&&this.doc.cantEdit){this.doc.cantEdit=false;z&&bi(z.doc)}z&&fJ(z,"markerCleared",z,this);y&&gs(z);this.parent&&this.parent.clear()}};aE.prototype.find=function(o,m){o==null&&this.type=="bookmark"&&(o=1);for(var u,t,r=0;r<this.lines.length;++r){var q=this.lines[r],p=ax(q.markedSpans,this);if(p.from!=null){u=e5(m?q:fS(q),p.from);if(o==-1){return u}}if(p.to!=null){t=e5(m?q:fS(q),p.to);if(o==1){return t}}}return u&&{from:u,to:t}};aE.prototype.changed=function(){var o=this.find(-1,true),m=this,p=this.doc.cm;o&&p&&fA(p,function(){var r=o.line,q=fS(o.line);if(q=d8(p,q)){eK(q);p.curOp.selectionChanged=p.curOp.forceUpdate=true}p.curOp.updateMaxLine=true;if(!aK(m.doc,r)&&m.height!=null){q=m.height;m.height=null;(q=bI(m)-q)&&fq(r,r.height+q)}})};aE.prototype.attachLine=function(o){if(!this.lines.length&&this.doc.cm){var m=this.doc.cm.curOp;if(!m.maybeHiddenMarkers||fL(m.maybeHiddenMarkers,this)==-1){(m.maybeUnhiddenMarkers||(m.maybeUnhiddenMarkers=[])).push(this)}}this.lines.push(o)};aE.prototype.detachLine=function(m){this.lines.splice(fL(this.lines,m),1);if(!this.lines.length&&this.doc.cm){m=this.doc.cm.curOp;(m.maybeHiddenMarkers||(m.maybeHiddenMarkers=[])).push(this)}};var c4=0,cG=e6.SharedTextMarker=function(o,m){this.markers=o;this.primary=m;for(var p=0;p<o.length;++p){o[p].parent=this}};cC(cG);cG.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=true;for(var m=0;m<this.markers.length;++m){this.markers[m].clear()}fJ(this,"clear")}};cG.prototype.find=function(o,m){return this.primary.find(o,m)};var cu=e6.LineWidget=function(o,m,q){if(q){for(var p in q){q.hasOwnProperty(p)&&(this[p]=q[p])}}this.doc=o;this.node=m};cC(cu);cu.prototype.clear=function(){var o=this.doc.cm,m=this.line.widgets,t=this.line,r=fS(t);if(r!=null&&m){for(var q=0;q<m.length;++q){m[q]==this&&m.splice(q--,1)}if(!m.length){t.widgets=null}var p=bI(this);fq(t,Math.max(0,t.height-p));o&&fA(o,function(){dT(o,t,-p);ds(o,r,"widget")})}};cu.prototype.changed=function(){var o=this.height,m=this.doc.cm,q=this.line;this.height=null;var p=bI(this)-o;if(p){fq(q,q.height+p);m&&fA(m,function(){m.curOp.forceUpdate=true;dT(m,q,p)})}};var ak=e6.Line=function(o,m,p){this.text=o;eq(this,m);this.height=p?p(this):1};cC(ak);ak.prototype.lineNo=function(){return fS(this)};var b8={},cx={};h.prototype={chunkSize:function(){return this.lines.length},removeInner:function(o,m){for(var t=o,r=o+m;t<r;++t){var q=this.lines[t];this.height=this.height-q.height;var p=q;p.parent=null;eD(p);fJ(q,"delete")}this.lines.splice(o,m)},collapse:function(m){m.push.apply(m,this.lines)},insertInner:function(o,m,p){this.height=this.height+p;this.lines=this.lines.slice(0,o).concat(m).concat(this.lines.slice(o));for(o=0;o<m.length;++o){m[o].parent=this}},iterN:function(o,m,p){for(m=o+m;o<m;++o){if(p(this.lines[o])){return true}}}};gx.prototype={chunkSize:function(){return this.size},removeInner:function(o,m){this.size=this.size-m;for(var u=0;u<this.children.length;++u){var t=this.children[u],r=t.chunkSize();if(o<r){var q=Math.min(m,r-o),p=t.height;t.removeInner(o,q);this.height=this.height-(p-t.height);if(r==q){this.children.splice(u--,1);t.parent=null}if((m=m-q)==0){break}o=0}else{o=o-r}}if(this.size-m<25&&(this.children.length>1||!(this.children[0] instanceof h))){u=[];this.collapse(u);this.children=[new h(u)];this.children[0].parent=this}},collapse:function(o){for(var m=0;m<this.children.length;++m){this.children[m].collapse(o)}},insertInner:function(o,m,t){this.size=this.size+m.length;this.height=this.height+t;for(var r=0;r<this.children.length;++r){var q=this.children[r],p=q.chunkSize();if(o<=p){q.insertInner(o,m,t);if(q.lines&&q.lines.length>50){for(;q.lines.length>50;){o=q.lines.splice(q.lines.length-25,25);o=new h(o);q.height=q.height-o.height;this.children.splice(r+1,0,o);o.parent=this}this.maybeSpill()}break}o=o-p}},maybeSpill:function(){if(!(this.children.length<=10)){var o=this;do{var m=o.children.splice(o.children.length-5,5),m=new gx(m);if(o.parent){o.size=o.size-m.size;o.height=o.height-m.height;var p=fL(o.parent.children,o);o.parent.children.splice(p+1,0,m)}else{p=new gx(o.children);p.parent=o;o.children=[p,m];o=p}m.parent=o.parent}while(o.children.length>10);o.parent.maybeSpill()}},iterN:function(o,m,t){for(var r=0;r<this.children.length;++r){var q=this.children[r],p=q.chunkSize();if(o<p){p=Math.min(m,p-o);if(q.iterN(o,p,t)){return true}if((m=m-p)==0){break}o=0}else{o=o-p}}}};var dL=0,fE=e6.Doc=function(o,m,p){if(!(this instanceof fE)){return new fE(o,m,p)}p==null&&(p=0);gx.call(this,[new h([new ak("",null)])]);this.first=p;this.scrollTop=this.scrollLeft=0;this.cantEdit=false;this.cleanGeneration=1;this.frontier=p;p=e5(p,0);this.sel=fT(p);this.history=new bT(null);this.id=++dL;this.modeOption=m;typeof o=="string"&&(o=b7(o));dO(this,{from:p,to:p,text:o});fV(this,fT(p),fk)};fE.prototype=bh(gx.prototype,{constructor:fE,iter:function(o,m,p){p?this.iterN(o-this.first,m-o,p):this.iterN(this.first,this.first+this.size,o)},insert:function(o,m){for(var q=0,p=0;p<m.length;++p){q=q+m[p].height}this.insertInner(o-this.first,m,q)},remove:function(o,m){this.removeInner(o-this.first,m)},getValue:function(o){var m=bS(this,this.first,this.first+this.size);return o===false?m:m.join(o||"\n")},setValue:fG(function(o){var m=e5(this.first,0),p=this.first+this.size-1;eW(this,{from:m,to:e5(p,e2(this,p).text.length),text:b7(o),origin:"setValue",full:true},true);fV(this,fT(m))}),replaceRange:function(o,m,q,p){m=e1(this,m);q=q?e1(this,q):m;a7(this,o,m,q,p)},getRange:function(o,m,p){o=f7(this,e1(this,o),e1(this,m));return p===false?o:o.join(p||"\n")},getLine:function(m){return(m=this.getLineHandle(m))&&m.text},getLineHandle:function(m){if(cH(this,m)){return e2(this,m)}},getLineNumber:function(m){return fS(m)},getLineHandleVisualStart:function(m){typeof m=="number"&&(m=e2(this,m));return eO(m)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(m){return e1(this,m)},getCursor:function(o){var m=this.sel.primary();return o==null||o=="head"?m.head:o=="anchor"?m.anchor:o=="end"||o=="to"||o===false?m.to():m.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:fG(function(o,m,p){o=e1(this,typeof o=="number"?e5(o,m||0):o);fV(this,fT(o,null),p)}),setSelection:fG(function(o,m,q){var p=e1(this,o),o=e1(this,m||o);fV(this,fT(p,o),q)}),extendSelection:fG(function(o,m,p){dx(this,e1(this,o),m&&e1(this,m),p)}),extendSelections:fG(function(o){for(var m=[],p=0;p<o.length;p++){m[p]=e1(this,o[p])}cL(this,m)}),extendSelectionsBy:fG(function(o,m){cL(this,c6(this.sel.ranges,o),m)}),setSelections:fG(function(o,m,r){if(o.length){for(var q=0,p=[];q<o.length;q++){p[q]=new eY(e1(this,o[q].anchor),e1(this,o[q].head))}m==null&&(m=Math.min(o.length-1,this.sel.primIndex));fV(this,fu(p,m),r)}}),addSelection:fG(function(o,m,q){var p=this.sel.ranges.slice(0);p.push(new eY(e1(this,o),e1(this,m||o)));fV(this,fu(p,p.length-1),q)}),getSelection:function(o){for(var m=this.sel.ranges,r,q=0;q<m.length;q++){var p=f7(this,m[q].from(),m[q].to());r=r?r.concat(p):p}return o===false?r:r.join(o||"\n")},getSelections:function(o){for(var m=[],r=this.sel.ranges,q=0;q<r.length;q++){var p=f7(this,r[q].from(),r[q].to());o!==false&&(p=p.join(o||"\n"));m[q]=p}return m},replaceSelection:function(o,m,r){for(var q=[],p=0;p<this.sel.ranges.length;p++){q[p]=o}this.replaceSelections(q,m,r||"+input")},replaceSelections:fG(function(w,v,u){for(var t=[],r=this.sel,q=0;q<r.ranges.length;q++){var p=r.ranges[q];t[q]={from:p.from(),to:p.to(),text:b7(w[q]),origin:u}}if(q=v){if(q=v!="end"){q=[];u=w=e5(this.first,0);for(r=0;r<t.length;r++){var o=t[r],p=ah(o.from,w,u),m=ah(bV(o),w,u),w=o.to,u=m;if(v=="around"){o=this.sel.ranges[r];o=eZ(o.head,o.anchor)<0;q[r]=new eY(o?m:p,o?p:m)}else{q[r]=new eY(p,p)}}q=new dR(q,this.sel.primIndex)}}v=q;for(q=t.length-1;q>=0;q--){eW(this,t[q])}v?cz(this,v):this.cm&&eH(this.cm)}),undo:fG(function(){d2(this,"undo")}),redo:fG(function(){d2(this,"redo")}),undoSelection:fG(function(){d2(this,"undo",true)}),redoSelection:fG(function(){d2(this,"redo",true)}),setExtending:function(m){this.extend=m},getExtending:function(){return this.extend},historySize:function(){for(var o=this.history,m=0,q=0,p=0;p<o.done.length;p++){o.done[p].ranges||++m}for(p=0;p<o.undone.length;p++){o.undone[p].ranges||++q}return{undo:m,redo:q}},clearHistory:function(){this.history=new bT(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(true)},changeGeneration:function(m){if(m){this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null}return this.history.generation},isClean:function(m){return this.history.generation==(m||this.cleanGeneration)},getHistory:function(){return{done:cO(this.history.done),undone:cO(this.history.undone)}},setHistory:function(o){var m=this.history=new bT(this.history.maxGeneration);m.done=cO(o.done.slice(0),null,true);m.undone=cO(o.undone.slice(0),null,true)},addLineClass:fG(function(o,m,p){return dC(this,o,m=="gutter"?"gutter":"class",function(q){var r=m=="text"?"textClass":m=="background"?"bgClass":m=="gutter"?"gutterClass":"wrapClass";if(q[r]){if(a1(p).test(q[r])){return false}q[r]=q[r]+(" "+p)}else{q[r]=p}return true})}),removeLineClass:fG(function(o,m,p){return dC(this,o,m=="gutter"?"gutter":"class",function(q){var v=m=="text"?"textClass":m=="background"?"bgClass":m=="gutter"?"gutterClass":"wrapClass",u=q[v];if(u){if(p==null){q[v]=null}else{var t=u.match(a1(p));if(!t){return false}var r=t.index+t[0].length;q[v]=u.slice(0,t.index)+(!t.index||r==u.length?"":" ")+u.slice(r)||null}}else{return false}return true})}),addLineWidget:fG(function(o,m,p){return cJ(this,o,m,p)}),removeLineWidget:function(m){m.clear()},markText:function(o,m,p){return c0(this,e1(this,o),e1(this,m),p,"range")},setBookmark:function(o,m){var p={replacedWith:m&&(m.nodeType==null?m.widget:m),insertLeft:m&&m.insertLeft,clearWhenEmpty:false,shared:m&&m.shared,handleMouseEvents:m&&m.handleMouseEvents},o=e1(this,o);return c0(this,o,o,p,"bookmark")},findMarksAt:function(o){var o=e1(this,o),m=[],r=e2(this,o.line).markedSpans;if(r){for(var q=0;q<r.length;++q){var p=r[q];if((p.from==null||p.from<=o.ch)&&(p.to==null||p.to>=o.ch)){m.push(p.marker.parent||p.marker)}}}return m},findMarks:function(o,m,r){var o=e1(this,o),m=e1(this,m),q=[],p=o.line;this.iter(o.line,m.line+1,function(v){if(v=v.markedSpans){for(var u=0;u<v.length;u++){var t=v[u];if(!(p==o.line&&o.ch>t.to||t.from==null&&p!=o.line||p==m.line&&t.from>m.ch)&&(!r||r(t.marker))){q.push(t.marker.parent||t.marker)}}}++p});return q},getAllMarks:function(){var m=[];this.iter(function(o){if(o=o.markedSpans){for(var p=0;p<o.length;++p){o[p].from!=null&&m.push(o[p].marker)}}});return m},posFromIndex:function(o){var m,p=this.first;this.iter(function(q){q=q.text.length+1;if(q>o){m=o;return true}o=o-q;++p});return e1(this,e5(p,m))},indexFromPos:function(o){var o=e1(this,o),m=o.ch;if(o.line<this.first||o.ch<0){return 0}this.iter(this.first,o.line,function(p){m=m+(p.text.length+1)});return m},copy:function(o){var m=new fE(bS(this,this.first,this.first+this.size),this.modeOption,this.first);m.scrollTop=this.scrollTop;m.scrollLeft=this.scrollLeft;m.sel=this.sel;m.extend=false;if(o){m.history.undoDepth=this.history.undoDepth;m.setHistory(this.getHistory())}return m},linkedDoc:function(o){o||(o={});var m=this.first,t=this.first+this.size;if(o.from!=null&&o.from>m){m=o.from}if(o.to!=null&&o.to<t){t=o.to}m=new fE(bS(this,m,t),o.mode||this.modeOption,m);if(o.sharedHist){m.history=this.history}(this.linked||(this.linked=[])).push({doc:m,sharedHist:o.sharedHist});m.linked=[{doc:this,isParent:true,sharedHist:o.sharedHist}];o=fm(this);for(t=0;t<o.length;t++){var r=o[t],q=r.find(),p=m.clipPos(q.from),q=m.clipPos(q.to);if(eZ(p,q)){p=c0(m,p,q,r.primary,r.primary.type);r.markers.push(p);p.parent=r}}return m},unlinkDoc:function(o){if(o instanceof e6){o=o.doc}if(this.linked){for(var m=0;m<this.linked.length;++m){if(this.linked[m].doc==o){this.linked.splice(m,1);o.unlinkDoc(this);c8(fm(this));break}}}if(o.history==this.history){var p=[o.id];aQ(o,function(q){p.push(q.id)},true);o.history=new bT(null);o.history.done=cO(this.history.done,p);o.history.undone=cO(this.history.undone,p)}},iterLinkedDocs:function(m){aQ(this,m)},getMode:function(){return this.mode},getEditor:function(){return this.cm}});fE.prototype.eachLine=fE.prototype.iter;var dz=["iter","insert","remove","copy","getEditor"],s;for(s in fE.prototype){fE.prototype.hasOwnProperty(s)&&0>fL(dz,s)&&(e6.prototype[s]=function(m){return function(){return m.apply(this.doc,arguments)}}(fE.prototype[s]))}cC(fE);var fF=e6.e_preventDefault=function(m){m.preventDefault?m.preventDefault():m.returnValue=false},dl=e6.e_stopPropagation=function(m){m.stopPropagation?m.stopPropagation():m.cancelBubble=true},gi=e6.e_stop=function(m){fF(m);dl(m)},e4=e6.on=function(o,m,p){if(o.addEventListener){o.addEventListener(m,p,false)}else{if(o.attachEvent){o.attachEvent("on"+m,p)}else{o=o._handlers||(o._handlers={});(o[m]||(o[m]=[])).push(p)}}},eo=e6.off=function(o,m,p){if(o.removeEventListener){o.removeEventListener(m,p,false)}else{if(o.detachEvent){o.detachEvent("on"+m,p)}else{if(o=o._handlers&&o._handlers[m]){for(m=0;m<o.length;++m){if(o[m]==p){o.splice(m,1);break}}}}}},fO=e6.signal=function(o,m){var r=o._handlers&&o._handlers[m];if(r){for(var q=Array.prototype.slice.call(arguments,2),p=0;p<r.length;++p){r[p].apply(null,q)}}},f6=null,f4=30,a4=e6.Pass={toString:function(){return"CodeMirror.Pass"}},fk={scroll:!1},fN={origin:"*mouse"},aP={origin:"+move"};bD.prototype.set=function(o,m){clearTimeout(this.id);this.id=setTimeout(m,o)};var ft=e6.countColumn=function(o,m,t,r,q){if(m==null){m=o.search(/[^\s\u00a0]/);if(m==-1){m=o.length}}r=r||0;for(q=q||0;;){var p=o.indexOf("\t",r);if(p<0||p>=m){return q+(m-r)}q=q+(p-r);q=q+(t-q%t);r=p+1}},bH=[""],ck=function(m){m.select()};eu?ck=function(m){m.selectionStart=0;m.selectionEnd=m.value.length}:eV&&(ck=function(o){try{o.select()}catch(m){}});var c1=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,cm=e6.isWordChar=function(m){return/\w/.test(m)||m>""&&(m.toUpperCase()!=m.toLowerCase()||c1.test(m))},fI=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/,br;br=document.createRange?function(o,m,r,q){var p=document.createRange();p.setEnd(q||o,r);p.setStart(o,m);return p}:function(o,m,r){var q=document.body.createTextRange();try{q.moveToElementText(o.parentNode)}catch(p){return q}q.collapse(true);q.moveEnd("character",r);q.moveStart("character",m);return q};var dV=e6.contains=function(o,m){if(m.nodeType==3){m=m.parentNode}if(o.contains){return o.contains(m)}do{if(m.nodeType==11){m=m.host}if(m==o){return true}}while(m=m.parentNode)};eV&&11>eT&&(gm=function(){try{return document.activeElement}catch(m){return document.body}});var d3=e6.rmClass=function(o,m){var r=o.className,q=a1(m).exec(r);if(q){var p=r.slice(q.index+q[0].length);o.className=r.slice(0,q.index)+(p?q[1]+p:"")}},dD=e6.addClass=function(o,m){var p=o.className;if(!a1(m).test(p)){o.className=o.className+((p?" ":"")+m)}},av=!1,am=function(){if(eV&&eT<9){return false}var m=e3("div");return"draggable" in m||"dragDrop" in m}(),bG,ct,b7=e6.splitLines=3!="\n\nb".split(/\n/).length?function(o){for(var m=0,u=[],t=o.length;m<=t;){var r=o.indexOf("\n",m);if(r==-1){r=o.length}var q=o.slice(m,o.charAt(r-1)=="\r"?r-1:r),p=q.indexOf("\r");if(p!=-1){u.push(q.slice(0,p));m=m+(p+1)}else{u.push(q);m=r+1}}return u}:function(m){return m.split(/\r\n?|\n/)},dY=window.getSelection?function(o){try{return o.selectionStart!=o.selectionEnd}catch(m){return false}}:function(o){try{var m=o.ownerDocument.selection.createRange()}catch(p){}return !m||m.parentElement()!=o?false:m.compareEndPoints("StartToEnd",m)!=0},aG=function(){var m=e3("div");if("oncopy" in m){return true}m.setAttribute("oncopy","return;");return typeof m.oncopy=="function"}(),cA=null,bx={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",107:"=",109:"-",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"};e6.keyNames=bx;(function(){for(var m=0;m<10;m++){bx[m+48]=bx[m+96]=""+m}for(m=65;m<=90;m++){bx[m]=String.fromCharCode(m)}for(m=1;m<=12;m++){bx[m+111]=bx[m+63235]="F"+m}})();var bw,cl=function(){function w(x){return x<=247?u.charAt(x):1424<=x&&x<=1524?"R":1536<=x&&x<=1773?t.charAt(x-1536):1774<=x&&x<=2220?"r":8192<=x&&x<=8203?"w":x==8204?"b":"L"}function v(y,x,z){this.level=y;this.from=x;this.to=z}var u="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",t="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmm",r=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,q=/[stwN]/,p=/[LRr]/,o=/[Lb1n]/,m=/[1n]/;return function(G){if(!r.test(G)){return false}for(var F=G.length,B=[],E=0,C;E<F;++E){B.push(w(G.charCodeAt(E)))}for(var E=0,A="L";E<F;++E){C=B[E];C=="m"?B[E]=A:A=C}E=0;for(A="L";E<F;++E){C=B[E];if(C=="1"&&A=="r"){B[E]="n"}else{if(p.test(C)){A=C;C=="r"&&(B[E]="R")}}}E=1;for(A=B[0];E<F-1;++E){C=B[E];if(C=="+"&&A=="1"&&B[E+1]=="1"){B[E]="1"}else{if(C==","&&A==B[E+1]&&(A=="1"||A=="n")){B[E]=A}}A=C}for(E=0;E<F;++E){C=B[E];if(C==","){B[E]="N"}else{if(C=="%"){for(A=E+1;A<F&&B[A]=="%";++A){}var z=E&&B[E-1]=="!"||A<F&&B[A]=="1"?"1":"N";for(C=E;C<A;++C){B[C]=z}E=A-1}}}E=0;for(A="L";E<F;++E){C=B[E];A=="L"&&C=="1"?B[E]="L":p.test(C)&&(A=C)}for(E=0;E<F;++E){if(q.test(B[E])){for(A=E+1;A<F&&q.test(B[A]);++A){}C=(A<F?B[A]:"L")=="L";z=(E?B[E-1]:"L")=="L"||C?"L":"R";for(C=E;C<A;++C){B[C]=z}E=A-1}}for(var A=[],y,E=0;E<F;){if(o.test(B[E])){C=E;for(++E;E<F&&o.test(B[E]);++E){}A.push(new v(0,C,E))}else{var x=E,z=A.length;for(++E;E<F&&B[E]!="L";++E){}for(C=x;C<E;){if(m.test(B[C])){x<C&&A.splice(z,0,new v(1,x,C));x=C;for(++C;C<E&&m.test(B[C]);++C){}A.splice(z,0,new v(2,x,C));x=C}else{++C}}x<E&&A.splice(z,0,new v(1,x,E))}}if(A[0].level==1&&(y=G.match(/^\s+/))){A[0].from=y[0].length;A.unshift(new v(0,0,y[0].length))}if(eX(A).level==1&&(y=G.match(/\s+$/))){eX(A).to-=y[0].length;A.push(new v(0,F-y[0].length,F))}A[0].level==2&&A.unshift(new v(1,A[0].to,A[0].to));A[0].level!=eX(A).level&&A.push(new v(A[0].level,F,F));return A}}();e6.version="5.2.0";return e6});